{"version":3,"sources":["../../ptt-client/dist/utils/query-builder/SelectQueryBuilder.js","../../ptt-client/dist/socket.js","../../ptt-client/dist/sites/ptt/config.js","../../ptt-client/dist/index.js","../../ptt-client/dist/sites/ptt/index.js","../../ptt-client/dist/sites/ptt/bot.js","../../ptt-client/dist/utils/decode.js","../../ptt-client/dist/utils/encode.js","../../ptt-client/dist/utils/keymap.js","../../ptt-client/dist/sites/ptt/model/article.js","../../ptt-client/dist/utils/query-builder/QueryBuilder.js","../../ptt-client/dist/sites/ptt/model/board.js","../../ptt-client/dist/sites/ptt/model/mail.js","components/UserContext.js","components/ProgressContext.js","components/BotContext.js","components/usePrev.js","components/Login.js","components/utils/decode.js","components/utils/article.js","components/BoardItem.js","components/ArticleBoardInfoContext.js","components/BoardDisplay.js","components/BoardSelect.js","components/BoardArea.js","components/SendComment.js","components/ArticleDisplay.js","components/ArticleItem.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/throttle-debounce/dist/index.esm.js","components/ArticleSelect.js","components/ArticleSearch.js","components/ArticleArea.js","components/Bar.js","components/MySnackbar.js","components/Main.js","App.js","serviceWorker.js","index.js","../../ptt-client/dist/sites/ptt/model/index.js","../../ptt-client/dist/utils/index.js","../../ptt-client/dist/utils/char.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","SelectQueryBuilder","_classCallCheck2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_QueryBuilder","_super","_len","length","args","Array","_key","concat","QueryBuilder","_toConsumableArray2","_createClass2","_assertThisInitialized2","_defineProperty2","_default","_EventEmitter","Socket","config","_this","_config","key","socket","_this2","WebSocket","Error","url","console","log","options","origin","addEventListener","emit","bind","timeoutHandler","data","binaryType","_ref","_data","currData","clearTimeout","push","Uint8Array","setTimeout","timeout","byteLength","blobSize","_socket","close","str","readyState","send","name","charset","protocol","preventIdleTimeout","terminal","columns","rows","enumerable","get","_ptt","_bot","_typeof2","_wrapNativeSuper2","_regenerator","_asyncToGenerator2","_eventemitter","_sleepPromise","_terminal","_utils","_char","_wrapRegExp","re","groups","BabelRegExp","undefined","_RegExp","RegExp","_groups","WeakMap","flags","set","buildGroups","g","keys","reduce","create","exec","Symbol","replace","substitution","_","_createForOfIteratorHelper","o","iterator","isArray","minLen","_arrayLikeToArray","n","slice","from","test","_unsupportedIterableToArray","i","F","s","done","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","Bot","term","state","getLine","init","lines","_this$term$state$getL","attr","assign","line","map","join","connect","_init","mark","_callee","wrap","_context","prev","_state","initialState","setMode","currentCharset","t0","toLowerCase","abrupt","forwardEvents","on","closeEvent","login","_len2","_key2","decode","includes","msg","write","stop","_getContent","_callee2","sentPgDown","lastLine","_i","j","_context2","keymap","PgDown","pop","Home","_getLines","_callee3","_context3","getContent","sent","_this3","preventIdle","Promise","resolve","reject","autoResolveHandler","cb","message","encode","once","removeListener","info","_this4","preventIdleHandler","_callee4","_context4","CtrlU","ArrowLeft","_login","_callee5","username","password","kick","ret","_args5","_context5","Enter","checkLogin","position","boardname","substring","_x","_x2","_logout","_callee6","_context6","_checkLogin","_callee7","_context7","screen","_x3","substrWidth","trim","model","select","_getMails","_callee8","offset","mails","mail","_args8","_context8","enterMail","Math","max","End","sn","date","author","status","title","enterIndex","reverse","_getMail","_callee9","_context9","checkArticleWithHeader","timestamp","getLines","_x4","_enterIndex","_callee10","_context10","repeat","_enterArticleByAIDFromBoard","_callee11","AID","query","_context11","ArrowRight","_x5","_enterArticleByAID","_callee12","_context12","enterBoardByName","enterArticleByAIDFromBoard","_x6","_x7","_sendComment","_callee13","res","text","_iterator","_step","t","_context13","textParts","strPart","lenPerLine","seperateText","boardName","aid","type","finish","t1","_x8","_enterBoardByName","_callee14","_context14","currentBoardname","_x9","_enterByOffset","_callee16","offsets","_this5","_args16","_context16","_ref2","_callee15","lastOffset","_context15","_x10","_enterBoardByOffset","_callee17","_args17","_context17","enterByOffset","_enterFavorite","_callee18","_args18","_context18","_enterMail","_callee19","_context19","match","_uaoJs","Buffer","decodeSync","String","fromCharCode","buffer","encodeSync","ArrowUp","ArrowDown","PgUp","Backspace","CtrlC","CtrlP","CtrlZ","ArticleSelectQueryBuilder","WhereType","Article","_SelectQueryBuilder2","_content","content","warn","article","id","fixed","bot","_SelectQueryBuilder","condition","Boardname","Id","Push","wheres","Author","Title","last_id","_next","found","articles","getQuery","fromLine","_get","_i2","_getOne","hasHeader","BoardSelectQueryBuilder","Entry","Board","board","unread","category","flag","folder","divider","users","admin","Class","entry","Prefix","prefix","Offset","Offsets","boards","stopLoop","_line","_board","getByPrefix","Favorite","Hot","enterBoardByOffset","enterFavorite","fromClassLine","_getByPrefix","resultLine0","col","row","width","searchStr","searchInput","indexOf","MailSelectQueryBuilder","Mail","cookies","Cookies","constate","useState","user","setUser","UserProvider","useUserContext","isSnackbarOpen","setIsSnackbarOpen","severity","snackbarContent","setSnackbarContent","ProgressProvider","useProgressContext","Ptt","botState","setBotState","prevBotState","ref","useRef","useEffect","current","usePrev","busy","arg","a","executeCommand","command","getIterator","getOne","sendComment","BotProvider","useBotContext","useStyles","makeStyles","theme","root","justifyContent","alignItems","flexDirection","paperform","margin","spacing","display","paperlogging","minWidth","height","marginTop","zIndex","drawer","paperreconnect","padding","reconnectText","reconnectButton","alignSelf","form","submit","signin","backdrop","color","circle","marginRight","Login","classes","BotContext","useForm","register","handleSubmit","onSubmit","preventDefault","myUser","loginCallback","useCallback","setOpenForm","setOpenLoadingCircle","setOpenBackDrop","openBackDrop","openLoadingCircle","openForm","openReconnect","setOpenReconnect","tryLogin","Grid","container","component","className","Paper","CircularProgress","Typography","variant","Backdrop","open","CssBaseline","Button","onClick","reconnect","TextField","required","fullWidth","label","autoComplete","autoFocus","inputRef","FormControlLabel","control","Checkbox","base10_64","num","r","nnum","Number","order","base","rtn","charAt","URL2AID","urlPieces","split","x","codes","code10","code16","b10_64","b16_64","parseInt","parseArticle","articleItem","newArticleContent","commentStartIndex","ip","comment","getArticleResponse","parseArticleInfoAndContent","parseArticleComment","ArticleModel","where","startsWith","aidLine","floor","commentLine","firstColon","refreshArticleComment","getArticleList","getArticleListIterator","criteria","BoardItem","props","item","handleClick","setArticleList","setBoardName","setIndex","ListItem","button","style","ListItemText","primary","secondary","ListItemIcon","setArticle","articleList","index","articleSearchIterator","setArticleSearchIterator","setCriteria","ArticleBoardInfoProvider","useArticleBoardInfoContext","BoardDisplay","maxHeight","overflow","alignContent","skeleton","fontSize","list","listItems","setListItems","hotItems","favoriteItems","searchCache","selectedBoard","searchBoardText","getBoardCallback","lis","performance","now","t2","t3","getBoard","count","List","BoardSelect","tabs","flexBasis","tab","searchBotton","btntabs","inputbase","selectedValue","setSelectedValue","isInputShow","setIsInputShow","setSelectedBoard","setSearchBoardText","IconButton","aria-label","Tabs","indicatorColor","textColor","onChange","v","Tab","wrapped","Collapse","in","InputBase","placeholder","BoardArea","borderRight","palette","SendComment","paddingLeft","paddingRight","paddingBottom","sending","marginLeft","lp","isSending","setIsSending","values","refreshArticleCommentRes","noValidate","FormControl","InputLabel","as","Select","MenuItem","rules","defaultValue","Divider","orientation","multiline","endIcon","size","ArticleDisplay","top","borderBottom","flexWrap","goback","titleText","flexGrow","flexShrink","commentlist","paddingTop","contentlist","commentlist_item","commentlist_type","commentlist_author","commentlist_text","commentlist_timestamp","lit","whiteSpace","React","createRef","scrollTop","disableGutters","genContentList","genCommentList","ArticleItem","textAlign","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","wrapper","self","elapsed","clear","cancel","__","ArticleSelect","right","backgroundColor","searchFab","bottom","paper","closeIcon","saTitle","isArticleSearchFormOpen","setIsArticleSearchFormOpen","articleItems","setArticleItems","toggleSearchForm","errors","onSubmitSearch","invisible","ClickAwayListener","mouseEvent","onClickAway","elevation","helperText","error","pattern","Fab","scrollableTarget","dataLength","then","res_reduced","hasMore","loader","loading","endMessage","ArticleSearch","buttoninfo","articleListSearch","setArticleListSearch","articleItemsSearch","setArticleItemsSearch","setHasMore","setList","handleLoadMore","l_id","ArticleArea","onChangeIndex","toolbar","boxShadow","transition","toolbarTitle","flex","toolbarSecondary","overflowX","toolbarLink","fontFamily","Bar","Fragment","Toolbar","MySnackbar","Alert","Snackbar","autoHideDuration","onClose","event","reason","createMuiTheme","typography","body1","body2","h5","fontWeight","resizable","Main","ThemeProvider","Container","maxWidth","xs","defaultSize","enable","left","topRight","bottomRight","bottomLeft","topLeft","App","Component","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","_article","_mail","_decode","_encode","_keymap","dbcswidth","getWidth","indexOfWidth","widthType","startWidth","ignoreWidth","start","prefixSpace","suffixSpace","substr","min","_wcwidth","sum","c","charCodeAt"],"mappings":"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","file":"static/js/main.6570e261.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectQueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _QueryBuilder2 = require(\"./QueryBuilder\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SelectQueryBuilder = /*#__PURE__*/function (_QueryBuilder) {\n  (0, _inherits2[\"default\"])(SelectQueryBuilder, _QueryBuilder);\n\n  var _super = _createSuper(SelectQueryBuilder);\n\n  function SelectQueryBuilder() {\n    (0, _classCallCheck2[\"default\"])(this, SelectQueryBuilder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _super.call.apply(_super, [this].concat(args));\n  }\n\n  return SelectQueryBuilder;\n}(_QueryBuilder2.QueryBuilder);\n\nexports.SelectQueryBuilder = SelectQueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Socket = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Socket, _EventEmitter);\n\n  var _super = _createSuper(Socket);\n\n  function Socket(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Socket);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_socket\", void 0);\n    _this._config = config;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Socket, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this2 = this;\n\n      var socket;\n\n      if (typeof WebSocket === 'undefined') {\n        throw new Error(\"'WebSocket' is undefined. Do you include any websocket polyfill?\");\n      } else if (WebSocket.length === 1) {\n        socket = new WebSocket(this._config.url);\n        console.log('WebSocket 1', socket, this._config);\n      } else {\n        var options = {};\n\n        if (this._config.origin) {\n          options.origin = this._config.origin;\n        }\n\n        socket = new WebSocket(this._config.url, options);\n      }\n\n      socket.addEventListener('open', this.emit.bind(this, 'connect'));\n      socket.addEventListener('close', this.emit.bind(this, 'disconnect'));\n      socket.addEventListener('error', this.emit.bind(this, 'error'));\n      var data = [];\n      var timeoutHandler;\n      socket.binaryType = 'arraybuffer';\n      socket.addEventListener('message', function (_ref) {\n        var _data;\n\n        var currData = _ref.data;\n        clearTimeout(timeoutHandler);\n\n        (_data = data).push.apply(_data, (0, _toConsumableArray2[\"default\"])(new Uint8Array(currData)));\n\n        timeoutHandler = setTimeout(function () {\n          _this2.emit('message', data);\n\n          data = [];\n        }, _this2._config.timeout);\n\n        if (currData.byteLength > _this2._config.blobSize) {\n          throw new Error(\"Receive message length(\".concat(currData.byteLength, \") greater than buffer size(\").concat(_this2._config.blobSize, \")\"));\n        }\n      });\n      this._socket = socket;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var socket = this._socket;\n      socket.close();\n    }\n  }, {\n    key: \"send\",\n    value: function send(str) {\n      var socket = this._socket;\n\n      if (socket.readyState === 1\n      /* OPEN */\n      ) {\n          socket.send(str);\n        }\n    }\n  }]);\n  return Socket;\n}(_eventemitter[\"default\"]);\n\nvar _default = Socket;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar config = {\n  name: 'PTT',\n  url: 'wss://ws.ptt.cc/bbs',\n  charset: 'utf8',\n  origin: 'app://pcman',\n  protocol: 'websocket',\n  timeout: 200,\n  blobSize: 1024,\n  preventIdleTimeout: 30,\n  terminal: {\n    columns: 80,\n    rows: 24\n  }\n};\nvar _default = config;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"ptt\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Socket\", {\n  enumerable: true,\n  get: function get() {\n    return _socket[\"default\"];\n  }\n});\n\nvar _ptt = _interopRequireDefault(require(\"./sites/ptt\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nvar _socket = _interopRequireDefault(require(\"./socket\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"bot\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\n\nvar _bot = _interopRequireDefault(require(\"./bot\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nvar _sleepPromise = _interopRequireDefault(require(\"sleep-promise\"));\n\nvar _terminal = _interopRequireDefault(require(\"terminal.js\"));\n\nvar _socket = _interopRequireDefault(require(\"../../socket\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _char = require(\"../../utils/char\");\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nfunction _wrapRegExp(re, groups) { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _RegExp = (0, _wrapNativeSuper2[\"default\"])(RegExp); var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = _RegExp.call(this, re, flags); _groups.set(_this, groups || _groups.get(re)); return _this; } (0, _inherits2[\"default\"])(BabelRegExp, _RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = []; args.push.apply(args, arguments); if ((0, _typeof2[\"default\"])(args[args.length - 1]) !== \"object\") { args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Bot = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Bot, _EventEmitter);\n\n  var _super = _createSuper(Bot);\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"line\",\n    get: function get() {\n      var lines = [];\n\n      for (var i = 0; i < this.term.state.rows; i++) {\n        var _this$term$state$getL = this.term.state.getLine(i),\n            str = _this$term$state$getL.str,\n            attr = _this$term$state$getL.attr;\n\n        lines.push({\n          str: str,\n          attr: Object.assign({}, attr)\n        });\n      }\n\n      return lines;\n    }\n  }, {\n    key: \"screen\",\n    get: function get() {\n      return this.line.map(function (line) {\n        return line.str;\n      }).join(\"\\n\");\n    }\n  }]);\n\n  function Bot(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Bot);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"term\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_state\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"currentCharset\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"socket\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"preventIdleHandler\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getLine\", function (n) {\n      return _this.term.state.getLine(n);\n    });\n    _this.config = _objectSpread(_objectSpread({}, _config[\"default\"]), config);\n\n    _this.init();\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.socket.connect();\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var _this2 = this;\n\n        var config, socket;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                config = this.config;\n                this.term = new _terminal[\"default\"](config.terminal);\n                this._state = _objectSpread({}, Bot.initialState);\n                this.term.state.setMode(\"stringWidth\", \"dbcs\");\n                this.currentCharset = \"big5\";\n                _context.t0 = config.protocol.toLowerCase();\n                _context.next = _context.t0 === \"websocket\" ? 8 : _context.t0 === \"ws\" ? 8 : _context.t0 === \"wss\" ? 8 : _context.t0 === \"telnet\" ? 9 : _context.t0 === \"ssh\" ? 9 : 9;\n                break;\n\n              case 8:\n                return _context.abrupt(\"break\", 11);\n\n              case 9:\n                throw new Error(\"Invalid protocol: \".concat(config.protocol));\n\n              case 11:\n                socket = new _socket[\"default\"](config);\n                socket.connect();\n                Bot.forwardEvents.forEach(function (e) {\n                  socket.on(e, _this2.emit.bind(_this2, e));\n                });\n                socket.on(\"connect\", function () {\n                  _this2._state.connect = true;\n\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  _this2.emit.apply(_this2, [\"connect\"].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state);\n                }).on(\"disconnect\", function (closeEvent) {\n                  _this2._state.connect = false;\n                  _this2._state.login = false;\n\n                  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                    args[_key2 - 1] = arguments[_key2];\n                  }\n\n                  _this2.emit.apply(_this2, [\"disconnect\", closeEvent].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state); // // try to reconnect\n                  // sleep(1000).then(() => {\n                  // \tthis.socket.connect();\n                  // });\n\n                }).on(\"message\", function (data) {\n                  if (_this2.currentCharset !== _this2.config.charset && !_this2.state.login && (0, _utils.decode)(data, \"utf8\").includes(\"登入中，請稍候...\")) {\n                    _this2.currentCharset = _this2.config.charset;\n                  }\n\n                  var msg = (0, _utils.decode)(data, _this2.currentCharset);\n\n                  _this2.term.write(msg);\n\n                  _this2.emit(\"redraw\", _this2.term.toString());\n                }).on(\"error\", function (err) {});\n                this.socket = socket;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getContent\",\n    value: function () {\n      var _getContent = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var lines, sentPgDown, i, lastLine, _i, j;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                lines = []; // console.log(this.line);\n\n                lines.push(this.line[0]);\n                sentPgDown = false; // var t0 = performance.now()\n\n              case 3:\n                if (!(!this.line[23].str.includes(\"100%\") && !this.line[23].str.includes(\"此文章無內容\"))) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                // var t2 = performance.now()\n                for (i = 1; i < 23; i++) {\n                  lines.push(this.line[i]);\n                } // var t3 = performance.now()\n                // console.log('lines.push : ', t3-t2 + 'ms')\n                // t3 = performance.now()\n\n\n                _context2.next = 7;\n                return this.send(_utils.keymap.PgDown);\n\n              case 7:\n                // var t4 = performance.now()\n                // console.log('await send key pgdown : ', t4-t3 + 'ms')\n                // console.log(this.line);\n                sentPgDown = true;\n                _context2.next = 3;\n                break;\n\n              case 10:\n                // var t1 = performance.now()\n                // console.log('while loop : ', t1-t0 + 'ms')\n                lastLine = lines[lines.length - 1];\n                _i = 0;\n\n              case 12:\n                if (!(_i < 23)) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                if (!(this.line[_i].str === lastLine.str)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                for (j = _i + 1; j < 23; j++) {\n                  lines.push(this.line[j]);\n                }\n\n                return _context2.abrupt(\"break\", 19);\n\n              case 16:\n                _i++;\n                _context2.next = 12;\n                break;\n\n              case 19:\n                while (lines.length > 0 && lines[lines.length - 1].str === \"\") {\n                  lines.pop();\n                }\n\n                if (!sentPgDown) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                _context2.next = 23;\n                return this.send(_utils.keymap.Home);\n\n              case 23:\n                return _context2.abrupt(\"return\", lines);\n\n              case 24:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getContent() {\n        return _getContent.apply(this, arguments);\n      }\n\n      return getContent;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getLines\",\n    value: function () {\n      var _getLines = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var lines;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getContent();\n\n              case 2:\n                lines = _context3.sent;\n                return _context3.abrupt(\"return\", lines.map(function (line) {\n                  return line.str;\n                }));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getLines() {\n        return _getLines.apply(this, arguments);\n      }\n\n      return getLines;\n    }()\n  }, {\n    key: \"send\",\n    value: function send(msg) {\n      var _this3 = this;\n\n      if (this.config.preventIdleTimeout) {\n        this.preventIdle(this.config.preventIdleTimeout);\n      }\n\n      return new Promise(function (resolve, reject) {\n        var autoResolveHandler;\n\n        var cb = function cb(message) {\n          clearTimeout(autoResolveHandler);\n          resolve(true);\n        };\n\n        if (_this3.state.connect) {\n          if (msg.length > 0) {\n            _this3.socket.send((0, _utils.encode)(msg, _this3.currentCharset));\n\n            _this3.once(\"message\", cb);\n\n            autoResolveHandler = setTimeout(function () {\n              _this3.removeListener(\"message\", cb);\n\n              resolve(false);\n            }, _this3.config.timeout * 10);\n          } else {\n            console.info(\"Sending message with 0-length. Skipped.\");\n            resolve(true);\n          }\n        } else {\n          reject();\n        }\n      });\n    }\n  }, {\n    key: \"preventIdle\",\n    value: function preventIdle(timeout) {\n      var _this4 = this;\n\n      clearTimeout(this.preventIdleHandler);\n\n      if (this.state.login) {\n        this.preventIdleHandler = setTimeout( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n          return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return _this4.send(_utils.keymap.CtrlU);\n\n                case 2:\n                  _context4.next = 4;\n                  return _this4.send(_utils.keymap.ArrowLeft);\n\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        })), timeout * 1000);\n      }\n    }\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(username, password) {\n        var kick,\n            ret,\n            state,\n            _args5 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                kick = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : true;\n\n                if (!this.state.login) {\n                  _context5.next = 3;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 3:\n                username = username.replace(/,/g, \"\");\n\n                if (this.config.charset === \"utf8\") {\n                  username += \",\";\n                }\n\n                _context5.next = 7;\n                return this.send(\"\".concat(username).concat(_utils.keymap.Enter).concat(password).concat(_utils.keymap.Enter));\n\n              case 7:\n                _context5.next = 9;\n                return this.checkLogin(kick);\n\n              case 9:\n                ret = _context5.sent;\n\n                if (ret) {\n                  state = this._state;\n                  state.login = true;\n                  state.position = {\n                    boardname: \"\"\n                  };\n                  this._state.username = username.substring(0, username.length - 1);\n                  this.emit(\"stateChange\", this.state);\n                }\n\n                return _context5.abrupt(\"return\", ret);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6() {\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (this.state.login) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 2:\n                _context6.next = 4;\n                return this.send(\"G\".concat(_utils.keymap.Enter, \"Y\").concat(_utils.keymap.Enter));\n\n              case 4:\n                this._state.login = false;\n                this.emit(\"stateChange\", this.state);\n                this.send(_utils.keymap.Enter);\n                return _context6.abrupt(\"return\", true);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"checkLogin\",\n    value: function () {\n      var _checkLogin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(kick) {\n        var state, lines;\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(this.line[21].str.includes(\"密碼不對或無此帳號\") || this.line[21].str.includes(\"請重新輸入\"))) {\n                  _context7.next = 5;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context7.abrupt(\"return\", false);\n\n              case 5:\n                if (!this.line[23].str.includes(\"請稍後再試\")) {\n                  _context7.next = 10;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context7.abrupt(\"return\", false);\n\n              case 10:\n                if (!this.line[13].str.includes(\"亂踹密碼會留下記錄喔\")) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context7.abrupt(\"return\", false);\n\n              case 15:\n                state = 0;\n\n              case 16:\n                if (!true) {\n                  _context7.next = 66;\n                  break;\n                }\n\n                _context7.next = 19;\n                return (0, _sleepPromise[\"default\"])(400);\n\n              case 19:\n                lines = this.line;\n\n                if (!lines[22].str.includes(\"登入中，請稍候...\")) {\n                  _context7.next = 23;\n                  break;\n                }\n\n                _context7.next = 64;\n                break;\n\n              case 23:\n                if (!lines[22].str.includes(\"您想刪除其他重複登入的連線嗎\")) {\n                  _context7.next = 32;\n                  break;\n                }\n\n                if (!(state === 1)) {\n                  _context7.next = 26;\n                  break;\n                }\n\n                return _context7.abrupt(\"continue\", 16);\n\n              case 26:\n                _context7.next = 28;\n                return this.send(\"\".concat(kick ? \"y\" : \"n\").concat(_utils.keymap.Enter));\n\n              case 28:\n                state = 1;\n                return _context7.abrupt(\"continue\", 16);\n\n              case 32:\n                if (!lines[23].str.includes(\"請勿頻繁登入以免造成系統過度負荷\")) {\n                  _context7.next = 40;\n                  break;\n                }\n\n                if (!(state === 2)) {\n                  _context7.next = 35;\n                  break;\n                }\n\n                return _context7.abrupt(\"continue\", 16);\n\n              case 35:\n                _context7.next = 37;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 37:\n                state = 2;\n                _context7.next = 64;\n                break;\n\n              case 40:\n                if (!lines[23].str.includes(\"您要刪除以上錯誤嘗試的記錄嗎\")) {\n                  _context7.next = 48;\n                  break;\n                }\n\n                if (!(state === 3)) {\n                  _context7.next = 43;\n                  break;\n                }\n\n                return _context7.abrupt(\"continue\", 16);\n\n              case 43:\n                _context7.next = 45;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 45:\n                state = 3;\n                _context7.next = 64;\n                break;\n\n              case 48:\n                if (!lines[23].str.includes(\"按任意鍵繼續\")) {\n                  _context7.next = 53;\n                  break;\n                }\n\n                _context7.next = 51;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 51:\n                _context7.next = 64;\n                break;\n\n              case 53:\n                if (!(lines[22].str + lines[23].str).toLowerCase().includes(\"y/n\")) {\n                  _context7.next = 59;\n                  break;\n                }\n\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n                _context7.next = 57;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 57:\n                _context7.next = 64;\n                break;\n\n              case 59:\n                if (!lines[23].str.includes(\"我是\")) {\n                  _context7.next = 63;\n                  break;\n                }\n\n                return _context7.abrupt(\"break\", 66);\n\n              case 63:\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n\n              case 64:\n                _context7.next = 16;\n                break;\n\n              case 66:\n                this.emit(\"login.success\");\n                return _context7.abrupt(\"return\", true);\n\n              case 68:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function checkLogin(_x3) {\n        return _checkLogin.apply(this, arguments);\n      }\n\n      return checkLogin;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"checkArticleWithHeader\",\n    value: function checkArticleWithHeader() {\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.line[0].str, 0, 6).trim();\n      return authorArea === \"作者\";\n    }\n  }, {\n    key: \"select\",\n    value: function select(model) {\n      return model.select(this);\n    }\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMails\",\n    value: function () {\n      var _getMails = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8() {\n        var offset,\n            getLine,\n            mails,\n            i,\n            line,\n            mail,\n            _args8 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                offset = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : 0;\n                _context8.next = 3;\n                return this.enterMail();\n\n              case 3:\n                if (!(offset > 0)) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                offset = Math.max(offset - 9, 1);\n                _context8.next = 7;\n                return this.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(offset).concat(_utils.keymap.Enter));\n\n              case 7:\n                getLine = this.getLine;\n                mails = [];\n\n                for (i = 3; i <= 22; i++) {\n                  line = getLine(i).str;\n                  mail = {\n                    sn: +(0, _char.substrWidth)(\"dbcs\", line, 1, 5).trim(),\n                    date: (0, _char.substrWidth)(\"dbcs\", line, 9, 5).trim(),\n                    author: (0, _char.substrWidth)(\"dbcs\", line, 15, 12).trim(),\n                    status: (0, _char.substrWidth)(\"dbcs\", line, 30, 2).trim(),\n                    title: (0, _char.substrWidth)(\"dbcs\", line, 33).trim()\n                  };\n                  mails.push(mail);\n                }\n\n                _context8.next = 12;\n                return this.enterIndex();\n\n              case 12:\n                return _context8.abrupt(\"return\", mails.reverse());\n\n              case 13:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getMails() {\n        return _getMails.apply(this, arguments);\n      }\n\n      return getMails;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMail\",\n    value: function () {\n      var _getMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(sn) {\n        var getLine, hasHeader, mail;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.enterMail();\n\n              case 2:\n                getLine = this.getLine;\n                _context9.next = 5;\n                return this.send(\"\".concat(sn).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 5:\n                hasHeader = this.checkArticleWithHeader();\n                mail = {\n                  sn: sn,\n                  author: \"\",\n                  title: \"\",\n                  timestamp: \"\",\n                  lines: []\n                };\n\n                if (this.checkArticleWithHeader()) {\n                  mail.author = (0, _char.substrWidth)(\"dbcs\", getLine(0).str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)(\"dbcs\", getLine(1).str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)(\"dbcs\", getLine(2).str, 7).trim();\n                }\n\n                _context9.next = 10;\n                return this.getLines();\n\n              case 10:\n                mail.lines = _context9.sent;\n                _context9.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context9.abrupt(\"return\", mail);\n\n              case 14:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function getMail(_x4) {\n        return _getMail.apply(this, arguments);\n      }\n\n      return getMail;\n    }()\n  }, {\n    key: \"enterIndex\",\n    value: function () {\n      var _enterIndex = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10() {\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this.send(\"\".concat(_utils.keymap.ArrowLeft.repeat(10)));\n\n              case 2:\n                return _context10.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function enterIndex() {\n        return _enterIndex.apply(this, arguments);\n      }\n\n      return enterIndex;\n    }()\n  }, {\n    key: \"enterArticleByAIDFromBoard\",\n    // From board enter article with AID\n    value: function () {\n      var _enterArticleByAIDFromBoard = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee11(AID) {\n        var query, res;\n        return _regenerator[\"default\"].wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (this.state.login) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                query = \"#\".concat(AID).concat(_utils.keymap.Enter);\n                _context11.next = 5;\n                return this.send(query);\n\n              case 5:\n                res = _context11.sent;\n\n                if (res) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                _context11.next = 9;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 9:\n                return _context11.abrupt(\"return\", Promise.reject(\"enterArticleByAIDFromBoard failed\"));\n\n              case 10:\n                _context11.next = 12;\n                return this.send(\"\".concat(_utils.keymap.ArrowRight));\n\n              case 12:\n                return _context11.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 13:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function enterArticleByAIDFromBoard(_x5) {\n        return _enterArticleByAIDFromBoard.apply(this, arguments);\n      }\n\n      return enterArticleByAIDFromBoard;\n    }() // Enter board and enter article with AID\n\n  }, {\n    key: \"enterArticleByAID\",\n    value: function () {\n      var _enterArticleByAID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee12(boardname, AID) {\n        return _regenerator[\"default\"].wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (this.state.login) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                _context12.prev = 2;\n                _context12.next = 5;\n                return this.enterBoardByName(boardname);\n\n              case 5:\n                _context12.next = 7;\n                return this.enterArticleByAIDFromBoard(AID);\n\n              case 7:\n                return _context12.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 10:\n                _context12.prev = 10;\n                _context12.t0 = _context12[\"catch\"](2);\n                return _context12.abrupt(\"return\", Promise.reject(_context12.t0));\n\n              case 13:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[2, 10]]);\n      }));\n\n      function enterArticleByAID(_x6, _x7) {\n        return _enterArticleByAID.apply(this, arguments);\n      }\n\n      return enterArticleByAID;\n    }() // send comment in article\n    //  res = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendComment\",\n    value: function () {\n      var _sendComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee13(res) {\n        var text, lenPerLine, seperateText, _iterator, _step, t;\n\n        return _regenerator[\"default\"].wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (this.state.login) {\n                  _context13.next = 2;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                text = res.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context13.next = 6;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 6:\n                lenPerLine = 52; // 中文字的長度是二\n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context13.prev = 9;\n                _context13.next = 12;\n                return this.enterBoardByName(res.boardName);\n\n              case 12:\n                _iterator = _createForOfIteratorHelper(text);\n                _context13.prev = 13;\n\n                _iterator.s();\n\n              case 15:\n                if ((_step = _iterator.n()).done) {\n                  _context13.next = 31;\n                  break;\n                }\n\n                t = _step.value;\n                _context13.next = 19;\n                return this.enterArticleByAIDFromBoard(res.aid);\n\n              case 19:\n                _context13.next = 21;\n                return this.send(\"X\");\n\n              case 21:\n                if (!this.line[23].str.includes(\"您覺得這篇文章\")) {\n                  _context13.next = 24;\n                  break;\n                }\n\n                _context13.next = 24;\n                return this.send(\"\".concat(res.type));\n\n              case 24:\n                if (!(this.line[22].str.includes(\"使用 → 加註方式\") || this.line[23].str.includes(this.state.username))) {\n                  _context13.next = 29;\n                  break;\n                }\n\n                _context13.next = 27;\n                return this.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 27:\n                _context13.next = 29;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 29:\n                _context13.next = 15;\n                break;\n\n              case 31:\n                _context13.next = 36;\n                break;\n\n              case 33:\n                _context13.prev = 33;\n                _context13.t0 = _context13[\"catch\"](13);\n\n                _iterator.e(_context13.t0);\n\n              case 36:\n                _context13.prev = 36;\n\n                _iterator.f();\n\n                return _context13.finish(36);\n\n              case 39:\n                _context13.next = 41;\n                return this.enterIndex();\n\n              case 41:\n                return _context13.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 44:\n                _context13.prev = 44;\n                _context13.t1 = _context13[\"catch\"](9);\n                return _context13.abrupt(\"return\", Promise.reject(_context13.t1));\n\n              case 47:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this, [[9, 44], [13, 33, 36, 39]]);\n      }));\n\n      function sendComment(_x8) {\n        return _sendComment.apply(this, arguments);\n      }\n\n      return sendComment;\n    }()\n  }, {\n    key: \"enterBoardByName\",\n    value: function () {\n      var _enterBoardByName = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee14(boardname) {\n        return _regenerator[\"default\"].wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this.send(\"s\".concat(boardname).concat(_utils.keymap.Enter, \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                if (!(this.currentBoardname.toLowerCase() === boardname.toLowerCase())) {\n                  _context14.next = 8;\n                  break;\n                }\n\n                this._state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                return _context14.abrupt(\"return\", Promise.resolve(\"now in board : \".concat(boardname)));\n\n              case 8:\n                _context14.next = 10;\n                return this.enterIndex();\n\n              case 10:\n                return _context14.abrupt(\"return\", Promise.reject(\"enterBoardByName failed\"));\n\n              case 11:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function enterBoardByName(_x9) {\n        return _enterBoardByName.apply(this, arguments);\n      }\n\n      return enterBoardByName;\n    }()\n  }, {\n    key: \"enterByOffset\",\n    value: function () {\n      var _enterByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee16() {\n        var _this5 = this;\n\n        var offsets,\n            result,\n            _args16 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                offsets = _args16.length > 0 && _args16[0] !== undefined ? _args16[0] : [];\n                result = true;\n                offsets.forEach( /*#__PURE__*/function () {\n                  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee15(offset) {\n                    var i, lastOffset;\n                    return _regenerator[\"default\"].wrap(function _callee15$(_context15) {\n                      while (1) {\n                        switch (_context15.prev = _context15.next) {\n                          case 0:\n                            if (offset === 0) {\n                              result = false;\n                            }\n\n                            if (!(offset < 0)) {\n                              _context15.next = 15;\n                              break;\n                            }\n\n                            i = 22;\n\n                          case 3:\n                            if (!(i >= 3)) {\n                              _context15.next = 15;\n                              break;\n                            }\n\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this5.line[i].str, 3, 4).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context15.next = 8;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context15.abrupt(\"break\", 15);\n\n                          case 8:\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this5.line[i].str, 15, 2).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context15.next = 12;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context15.abrupt(\"break\", 15);\n\n                          case 12:\n                            i--;\n                            _context15.next = 3;\n                            break;\n\n                          case 15:\n                            if (offset < 0) {\n                              result = false;\n                            }\n\n                            if (result) {\n                              _context15.next = 18;\n                              break;\n                            }\n\n                            return _context15.abrupt(\"return\");\n\n                          case 18:\n                            _context15.next = 20;\n                            return _this5.send(\"\".concat(offset).concat(_utils.keymap.Enter.repeat(2), \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n                          case 20:\n                          case \"end\":\n                            return _context15.stop();\n                        }\n                      }\n                    }, _callee15);\n                  }));\n\n                  return function (_x10) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n\n                if (!result) {\n                  _context16.next = 11;\n                  break;\n                }\n\n                this._state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                _context16.next = 8;\n                return this.send(_utils.keymap.Home);\n\n              case 8:\n                return _context16.abrupt(\"return\", true);\n\n              case 11:\n                _context16.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context16.abrupt(\"return\", false);\n\n              case 14:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function enterByOffset() {\n        return _enterByOffset.apply(this, arguments);\n      }\n\n      return enterByOffset;\n    }()\n  }, {\n    key: \"enterBoardByOffset\",\n    value: function () {\n      var _enterBoardByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee17() {\n        var offsets,\n            _args17 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                offsets = _args17.length > 0 && _args17[0] !== undefined ? _args17[0] : [];\n                _context17.next = 3;\n                return this.send(\"C\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context17.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context17.abrupt(\"return\", _context17.sent);\n\n              case 6:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function enterBoardByOffset() {\n        return _enterBoardByOffset.apply(this, arguments);\n      }\n\n      return enterBoardByOffset;\n    }()\n  }, {\n    key: \"enterFavorite\",\n    value: function () {\n      var _enterFavorite = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee18() {\n        var offsets,\n            _args18 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                offsets = _args18.length > 0 && _args18[0] !== undefined ? _args18[0] : [];\n                _context18.next = 3;\n                return this.send(\"F\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context18.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context18.abrupt(\"return\", _context18.sent);\n\n              case 6:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function enterFavorite() {\n        return _enterFavorite.apply(this, arguments);\n      }\n\n      return enterFavorite;\n    }()\n  }, {\n    key: \"enterMail\",\n    value: function () {\n      var _enterMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee19() {\n        return _regenerator[\"default\"].wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _context19.next = 2;\n                return this.send(\"M\".concat(_utils.keymap.Enter, \"R\").concat(_utils.keymap.Enter).concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                return _context19.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this);\n      }));\n\n      function enterMail() {\n        return _enterMail.apply(this, arguments);\n      }\n\n      return enterMail;\n    }()\n  }, {\n    key: \"state\",\n    get: function get() {\n      return _objectSpread({}, this._state);\n    }\n  }, {\n    key: \"currentBoardname\",\n    get: function get() {\n      var boardRe = /*#__PURE__*/_wrapRegExp(/\\u3010(?!\\u770B\\u677F\\u5217\\u8868).*\\u3011.*\\u300A(.*)\\u300B/, {\n        boardname: 1\n      });\n\n      var match = boardRe.exec(this.line[0].str);\n\n      if (match) {\n        return match.groups.boardname;\n      } else {\n        return void 0;\n      }\n    }\n  }]);\n  return Bot;\n}(_eventemitter[\"default\"]);\n\n(0, _defineProperty2[\"default\"])(Bot, \"initialState\", {\n  connect: false,\n  login: false\n});\n(0, _defineProperty2[\"default\"])(Bot, \"forwardEvents\", [\"message\", \"error\"]);\nvar _default = Bot;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _uaoJs = require(\"uao-js\");\n\nvar decode = function decode(data, charset) {\n  var str = '';\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      str = Buffer.from(data).toString('utf8');\n      break;\n\n    case 'big5':\n      str = (0, _uaoJs.decodeSync)(String.fromCharCode.apply(String, (0, _toConsumableArray2[\"default\"])(data)));\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return str;\n};\n\nvar _default = decode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _uaoJs = require(\"uao-js\");\n\nvar encode = function encode(str, charset) {\n  var buffer;\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      buffer = Buffer.from(str, 'utf8');\n      break;\n\n    case 'big5':\n      buffer = Buffer.from((0, _uaoJs.encodeSync)(str), 'binary');\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return buffer;\n};\n\nvar _default = encode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  Enter: '\\r',\n  ArrowLeft: '\\x1b[D',\n  ArrowRight: '\\x1b[C',\n  ArrowUp: '\\x1b[A',\n  ArrowDown: '\\x1b[B',\n  PgUp: '\\x1b[5~',\n  PgDown: '\\x1b[6~',\n  Home: '\\x1b[1~',\n  End: '\\x1b[4~',\n  Backspace: '\\b',\n  CtrlC: '\\x03',\n  CtrlP: '\\x10',\n  CtrlU: '\\x15',\n  CtrlZ: '\\x1a'\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ArticleSelectQueryBuilder = exports.WhereType = exports.Article = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Article = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Article() {\n    (0, _classCallCheck2[\"default\"])(this, Article);\n    (0, _defineProperty2[\"default\"])(this, \"boardname\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"push\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"fixed\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.content[0].str, 0, 6).trim();\n      return authorArea === \"作者\";\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var article = new Article();\n      var str = line.str;\n      article.id = +(0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim();\n      article.push = (0, _char.substrWidth)(\"dbcs\", str, 9, 2).trim();\n      article.date = (0, _char.substrWidth)(\"dbcs\", str, 11, 5).trim();\n      article.author = (0, _char.substrWidth)(\"dbcs\", str, 17, 12).trim();\n      article.status = (0, _char.substrWidth)(\"dbcs\", str, 30, 2).trim();\n      article.title = (0, _char.substrWidth)(\"dbcs\", str, 32).trim();\n      article.fixed = (0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim().includes(\"★\");\n      return article;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new ArticleSelectQueryBuilder(bot);\n    }\n  }]);\n  return Article;\n}();\n\nexports.Article = Article;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Boardname\"] = \"boardname\";\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Push\"] = \"push\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar ArticleSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(ArticleSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(ArticleSelectQueryBuilder);\n\n  function ArticleSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ArticleSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"boardname\", \"\");\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ArticleSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Boardname:\n          if (this.boardname !== \"\") {\n            console.warn(\"Cannot call where with type \\\"\".concat(type, \"\\\" multiple times\"));\n          } else {\n            this.boardname = condition;\n          }\n\n          break;\n\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Push:\n          this.wheres.push({\n            type: \"Z\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: \"a\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: \"/\",\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    } // Used when search article.\n    // Returns an iterator.\n\n  }, {\n    key: \"getIterator\",\n    value: function getIterator() {\n      var _this2 = this;\n\n      var last_id;\n      var iterator = {\n        next: function () {\n          var _next = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n            var found, articles, i, line, article;\n            return _regenerator[\"default\"].wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n\n                    if (!(last_id === 1)) {\n                      _context.next = 5;\n                      break;\n                    }\n\n                    _context.next = 4;\n                    return _this2.bot.enterIndex();\n\n                  case 4:\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 5:\n                    if (last_id) {\n                      _context.next = 18;\n                      break;\n                    }\n\n                    _context.next = 8;\n                    return _this2.bot.enterBoardByName(_this2.boardname);\n\n                  case 8:\n                    _context.next = 10;\n                    return _this2.bot.send(_this2.getQuery());\n\n                  case 10:\n                    found = _context.sent;\n                    console.log(\"found\", found);\n\n                    if (found) {\n                      _context.next = 14;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 14:\n                    _context.next = 16;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.End));\n\n                  case 16:\n                    _context.next = 20;\n                    break;\n\n                  case 18:\n                    _context.next = 20;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.PgUp));\n\n                  case 20:\n                    articles = [];\n                    i = 3;\n\n                  case 22:\n                    if (!(i <= 22)) {\n                      _context.next = 32;\n                      break;\n                    }\n\n                    line = _this2.bot.line[i]; // console.log(\"line\", line);\n\n                    if (!(line.str.trim() === \"\")) {\n                      _context.next = 26;\n                      break;\n                    }\n\n                    return _context.abrupt(\"break\", 32);\n\n                  case 26:\n                    article = Article.fromLine(line);\n                    article.boardname = _this2.boardname;\n                    articles.push(article);\n\n                  case 29:\n                    i++;\n                    _context.next = 22;\n                    break;\n\n                  case 32:\n                    // console.log(\"articles\", articles);\n                    last_id = articles[0].id;\n                    return _context.abrupt(\"return\", {\n                      value: articles,\n                      done: false\n                    });\n\n                  case 36:\n                    _context.prev = 36;\n                    _context.t0 = _context[\"catch\"](0);\n                    return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n                  case 39:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 36]]);\n          }));\n\n          function next() {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      };\n      return iterator;\n    } // Used when click in boarditem, we will only specify boardname.\n\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var found, id, articles, i, line, article, _i, _i2;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context2.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context2.sent;\n\n                if (found) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context2.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                articles = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === \"\")) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                return _context2.abrupt(\"break\", 23);\n\n              case 17:\n                article = Article.fromLine(line);\n                article.boardname = this.boardname;\n                articles.push(article);\n\n              case 20:\n                i++;\n                _context2.next = 13;\n                break;\n\n              case 23:\n                if (!(articles.length >= 2 && articles[0].id === 0)) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                _i = 1;\n\n              case 25:\n                if (!(_i < articles.length)) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                if (!(articles[_i].id !== 0)) {\n                  _context2.next = 29;\n                  break;\n                }\n\n                articles[0].id = articles[_i].id - _i;\n                return _context2.abrupt(\"break\", 32);\n\n              case 29:\n                _i++;\n                _context2.next = 25;\n                break;\n\n              case 32:\n                for (_i2 = 1; _i2 < articles.length; _i2++) {\n                  articles[_i2].id = articles[_i2 - 1].id + 1;\n                }\n\n                _context2.next = 35;\n                return this.bot.enterIndex();\n\n              case 35:\n                return _context2.abrupt(\"return\", articles.reverse());\n\n              case 36:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var found, article;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context3.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context3.sent;\n\n                if (found) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", void 0);\n\n              case 7:\n                _context3.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context3.next = 14;\n                return this.bot.getContent();\n\n              case 14:\n                article.content = _context3.sent;\n\n                if (article.hasHeader()) {\n                  article.author = (0, _char.substrWidth)(\"dbcs\", this.bot.line[0].str, 7, 50).trim();\n                  article.title = (0, _char.substrWidth)(\"dbcs\", this.bot.line[1].str, 7).trim();\n                  article.timestamp = (0, _char.substrWidth)(\"dbcs\", this.bot.line[2].str, 7).trim();\n                }\n\n                _context3.next = 18;\n                return this.bot.enterIndex();\n\n              case 18:\n                return _context3.abrupt(\"return\", article);\n\n              case 19:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }]);\n  return ArticleSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.ArticleSelectQueryBuilder = ArticleSelectQueryBuilder;\nvar _default = Article;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar QueryBuilder = function QueryBuilder() {\n  (0, _classCallCheck2[\"default\"])(this, QueryBuilder);\n};\n\nexports.QueryBuilder = QueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.BoardSelectQueryBuilder = exports.Entry = exports.WhereType = exports.Board = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Board = /*#__PURE__*/function () {\n  function Board() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    (0, _classCallCheck2[\"default\"])(this, Board);\n    (0, _defineProperty2[\"default\"])(this, \"name\", '');\n    (0, _defineProperty2[\"default\"])(this, \"id\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"unread\", false);\n    (0, _defineProperty2[\"default\"])(this, \"category\", '');\n    (0, _defineProperty2[\"default\"])(this, \"flag\", '');\n    (0, _defineProperty2[\"default\"])(this, \"title\", '');\n    (0, _defineProperty2[\"default\"])(this, \"users\", '');\n    (0, _defineProperty2[\"default\"])(this, \"admin\", '');\n    (0, _defineProperty2[\"default\"])(this, \"folder\", false);\n    (0, _defineProperty2[\"default\"])(this, \"divider\", false);\n    this.name = name;\n  }\n\n  (0, _createClass2[\"default\"])(Board, null, [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 3, 4).trim();\n      board.unread = (0, _char.substrWidth)('dbcs', str, 8, 2).trim() === 'ˇ';\n      board.name = (0, _char.substrWidth)('dbcs', str, 10, 12).trim();\n      board.category = (0, _char.substrWidth)('dbcs', str, 23, 4).trim();\n      board.flag = (0, _char.substrWidth)('dbcs', str, 28, 2).trim();\n\n      switch (board.flag) {\n        case '□':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30).replace(/\\s+$/, '');\n          board.folder = true;\n          break;\n\n        case '--':\n          board.divider = true;\n          break;\n\n        case 'Σ':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          board.folder = true;\n          break;\n\n        case '◎':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          break;\n\n        default:\n          console.warn(\"Unknown board flag. line.str: \\\"\".concat(str, \"\\\"\"));\n      }\n\n      return board;\n    }\n  }, {\n    key: \"fromClassLine\",\n    value: function fromClassLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 15, 2);\n      board.title = (0, _char.substrWidth)('dbcs', str, 20, 29).replace(/\\s+$/, '');\n      board.admin = (0, _char.substrWidth)('dbcs', str, 61).trim();\n      board.folder = true;\n      return board;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new BoardSelectQueryBuilder(bot);\n    }\n  }]);\n  return Board;\n}();\n\nexports.Board = Board;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Entry\"] = \"entry\";\n  WhereType[\"Prefix\"] = \"prefix\";\n  WhereType[\"Offset\"] = \"offset\";\n  WhereType[\"Offsets\"] = \"offsets\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar Entry;\nexports.Entry = Entry;\n\n(function (Entry) {\n  Entry[\"Class\"] = \"class\";\n  Entry[\"Favorite\"] = \"favorite\";\n  Entry[\"Hot\"] = \"hot\";\n})(Entry || (exports.Entry = Entry = {}));\n\nvar BoardSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(BoardSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(BoardSelectQueryBuilder);\n\n  function BoardSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, BoardSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"entry\", Entry.Class);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"prefix\", '');\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"offsets\", []);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(BoardSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type.toLowerCase()) {\n        case WhereType.Entry:\n          this.entry = condition.toLowerCase();\n          break;\n\n        case WhereType.Prefix:\n          this.prefix = condition;\n          break;\n\n        case WhereType.Offset:\n          this.offsets.push(condition);\n          break;\n\n        case WhereType.Offsets:\n          this.offsets = condition.slice();\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n          break;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, boards, i, line, board, stopLoop, _i, _line, _board;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.prefix !== '')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.getByPrefix(this.prefix);\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n                _context.t0 = this.entry;\n                _context.next = _context.t0 === Entry.Class ? 7 : _context.t0 === Entry.Favorite ? 11 : _context.t0 === Entry.Hot ? 15 : 19;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return this.bot.enterBoardByOffset(this.offsets);\n\n              case 9:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 11:\n                _context.next = 13;\n                return this.bot.enterFavorite(this.offsets);\n\n              case 13:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 15:\n                _context.next = 17;\n                return this.bot.enterBoardByOffset([-1].concat((0, _toConsumableArray2[\"default\"])(this.offsets)));\n\n              case 17:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 19:\n                boards = [];\n\n                if (!found) {\n                  _context.next = 56;\n                  break;\n                }\n\n                if (!(this.entry === Entry.Class && this.offsets.length === 0)) {\n                  _context.next = 34;\n                  break;\n                }\n\n                i = 7;\n\n              case 23:\n                if (!(i < 23)) {\n                  _context.next = 32;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 27;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 32);\n\n              case 27:\n                board = Board.fromClassLine(line);\n                boards.push(board);\n\n              case 29:\n                i++;\n                _context.next = 23;\n                break;\n\n              case 32:\n                _context.next = 56;\n                break;\n\n              case 34:\n                if (!true) {\n                  _context.next = 56;\n                  break;\n                }\n\n                stopLoop = false;\n                _i = 3;\n\n              case 37:\n                if (!(_i < 23)) {\n                  _context.next = 50;\n                  break;\n                }\n\n                _line = this.bot.line[_i];\n\n                if (!(_line.str.trim() === '')) {\n                  _context.next = 42;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 42:\n                _board = Board.fromLine(_line);\n\n                if (!(_board.id !== boards.length + 1)) {\n                  _context.next = 46;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 46:\n                boards.push(_board);\n\n              case 47:\n                _i++;\n                _context.next = 37;\n                break;\n\n              case 50:\n                if (!stopLoop) {\n                  _context.next = 52;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 56);\n\n              case 52:\n                _context.next = 54;\n                return this.bot.send(_utils.keymap.PgDown);\n\n              case 54:\n                _context.next = 34;\n                break;\n\n              case 56:\n                _context.next = 58;\n                return this.bot.enterIndex();\n\n              case 58:\n                return _context.abrupt(\"return\", boards);\n\n              case 59:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var res;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.get();\n\n              case 2:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res.length ? res[0] : void 0);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }, {\n    key: \"getByPrefix\",\n    value: function () {\n      var _getByPrefix = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(prefix) {\n        var boards, resultLine0, col, row, width, line, boardname, searchStr, searchInput;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.send(\"s\".concat(prefix, \" \"));\n\n              case 2:\n                boards = [];\n                resultLine0 = this.bot.line[3].str;\n\n                if (!(resultLine0.toLowerCase().indexOf(prefix.toLowerCase()) === 0)) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                col = 0, row = 0;\n                /* TODO: Use other way instead of the constant 15. */\n\n                width = 15;\n\n                while (width < resultLine0.length && resultLine0[width] !== ' ') {\n                  width += 1;\n                }\n\n                while (width < resultLine0.length && resultLine0[width] === ' ') {\n                  width += 1;\n                }\n\n              case 9:\n                if (!true) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                line = this.bot.line[row + 3];\n                boardname = (0, _char.substrWidth)('dbcs', line.str, col * width, width).trim();\n\n                if (!(boardname !== '')) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                boards.push(new Board(boardname));\n                _context3.next = 17;\n                break;\n\n              case 16:\n                return _context3.abrupt(\"break\", 25);\n\n              case 17:\n                row += 1;\n\n                if (!(row == 20)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                col += 1;\n                row = 0;\n                /* TODO: Use other way instead of the constant 80. */\n                // Optimization : only get 1 page.\n\n                if (!((col + 1) * width > 80)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"break\", 25);\n\n              case 23:\n                _context3.next = 9;\n                break;\n\n              case 25:\n                _context3.next = 30;\n                break;\n\n              case 27:\n                searchStr = this.bot.line[1].str;\n                searchInput = (0, _char.substrWidth)('dbcs', searchStr, 34, 15).trim();\n\n                if (searchInput.toLowerCase().indexOf(prefix.toLowerCase()) === 0) {\n                  boards.push(new Board(searchInput));\n                }\n\n              case 30:\n                _context3.next = 32;\n                return this.bot.send(_utils.keymap.CtrlC);\n\n              case 32:\n                return _context3.abrupt(\"return\", boards);\n\n              case 33:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getByPrefix(_x) {\n        return _getByPrefix.apply(this, arguments);\n      }\n\n      return getByPrefix;\n    }()\n  }]);\n  return BoardSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.BoardSelectQueryBuilder = BoardSelectQueryBuilder;\nvar _default = Board;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.MailSelectQueryBuilder = exports.WhereType = exports.Mail = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Mail = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Mail() {\n    (0, _classCallCheck2[\"default\"])(this, Mail);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)('dbcs', this.content[0].str, 0, 6).trim();\n      return authorArea === '作者';\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var mail = new Mail();\n      var str = line.str;\n      mail.id = +(0, _char.substrWidth)('dbcs', str, 1, 5).trim();\n      mail.date = (0, _char.substrWidth)('dbcs', str, 9, 5).trim();\n      mail.author = (0, _char.substrWidth)('dbcs', str, 15, 12).trim();\n      mail.status = (0, _char.substrWidth)('dbcs', str, 30, 2).trim();\n      mail.title = (0, _char.substrWidth)('dbcs', str, 33).trim();\n      return mail;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new MailSelectQueryBuilder(bot);\n    }\n  }]);\n  return Mail;\n}();\n\nexports.Mail = Mail;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar MailSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(MailSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(MailSelectQueryBuilder);\n\n  function MailSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MailSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MailSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: 'a',\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: '/',\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, id, mails, i, line, mail;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context.sent;\n\n                if (found) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                mails = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 22);\n\n              case 17:\n                mail = Mail.fromLine(line);\n                mails.push(mail);\n\n              case 19:\n                i++;\n                _context.next = 13;\n                break;\n\n              case 22:\n                _context.next = 24;\n                return this.bot.enterIndex();\n\n              case 24:\n                return _context.abrupt(\"return\", mails.reverse());\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var found, mail;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context2.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context2.sent;\n\n                if (found) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", void 0);\n\n              case 7:\n                _context2.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                mail = new Mail();\n                mail.id = this.id;\n                _context2.next = 13;\n                return this.bot.getContent();\n\n              case 13:\n                mail.content = _context2.sent;\n\n                if (mail.hasHeader()) {\n                  mail.author = (0, _char.substrWidth)('dbcs', this.bot.line[0].str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)('dbcs', this.bot.line[1].str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)('dbcs', this.bot.line[2].str, 7).trim();\n                }\n\n                _context2.next = 17;\n                return this.bot.enterIndex();\n\n              case 17:\n                return _context2.abrupt(\"return\", mail);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }]);\n  return MailSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.MailSelectQueryBuilder = MailSelectQueryBuilder;\nvar _default = Mail;\nexports[\"default\"] = _default;","import { useState } from 'react';\nimport Cookies from 'universal-cookie';\nimport constate from \"constate\";\n\nconst cookies = new Cookies();\n\nconst useUser = () => {\n    const [user,setUser] = useState(cookies.get('user')); \n\n    return {\n      user,setUser\n    };\n  };\n\nexport const [UserProvider, useUserContext] = constate(useUser);\n","import { useState } from \"react\";\nimport constate from \"constate\";\n\nconst useProgress = () => {\n\tconst [isSnackbarOpen,setIsSnackbarOpen] = useState(false);\n\tconst [snackbarContent,setSnackbarContent] = useState({\n\t\tseverity:\"\",\n\t\ttext:\"\",\n\t});\n\t\n\n\tconst info = {\n\t\tisSnackbarOpen:isSnackbarOpen,\n\t\tsetIsSnackbarOpen:setIsSnackbarOpen,\n\t\tsnackbarContent:snackbarContent,\n\t\tsetSnackbarContent:setSnackbarContent,\n\t};\n\treturn info;\n};\n\nexport const [ProgressProvider, useProgressContext] = constate(\n\tuseProgress\n);\n","import { useState } from \"react\";\nimport constate from \"constate\";\nimport Ptt from \"ptt-client\";\nimport usePrev from \"./usePrev\";\nimport { useProgressContext } from \"./ProgressContext\";\n\nconst useBot = () => {\n\t\n\tconsole.log('new useBot()')\n\tconst [bot] = useState(new Ptt());\n\t\n\tconst [botState, setBotState] = useState(bot.state);\n\tconst prevBotState = usePrev(botState);\n\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\n\tbot.on(\"connect\", () => {\n\t\tconsole.log(\"bot connected\");\n\t\tsetBotState(bot.state);\n\t});\n\n\tbot.on(\"disconnect\", () => {\n\t\tconsole.log(\"bot disconnected\");\n\t\tsetBotState(bot.state);\n\t});\n\n\tlet busy = false;\n\n\t// login function\n\tconst login = async arg => {\n\t\tconst username = arg.username,\n\t\t\tpassword = arg.password;\n\t\tlet res = await bot.login(username, password, true);\n\t\tif (res) setBotState({ ...botState, login: true });\n\t\treturn res;\n\t};\n\n\t// bot command\n\tconst executeCommand = async command => {\n\t\tif (busy) {\n\t\t\tsetSnackbarContent({severity:'info',text:'等！'})\n\t\t\tsetIsSnackbarOpen(true)\n\t\t\treturn Promise.reject('bot is busy!');\n\t\t}\n\t\tbusy = true;\n\t\tconsole.log(\"bot command : \", command);\n\t\ttry {\n\t\t\t// not connected\n\t\t\tif (!botState.connect) return Promise.reject('not login!');\n\t\t\t// go back to index\n\t\t\tif (command.type === \"index\") {\n\t\t\t\tawait bot.enterIndex();\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// login\n\t\t\tif (command.type === \"login\") {\n\t\t\t\tif (botState.login) return true;\n\t\t\t\tlet res = await login(command.arg);\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t// articleList\n\t\t\tif (command.type === \"select\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.get();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t// articleListIterator\n\t\t\tif (command.type === \"selectIterator\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet iterator = query.getIterator();\n\t\t\t\t// BUG!BUG!BUG!BUG!BUG!BUG!\n\t\t\t\tbusy = false;\n\t\t\t\t// BUG!BUG!BUG!BUG!BUG!BUG!\n\t\t\t\treturn iterator;\n\t\t\t}\n\t\t\t// content\n\t\t\tif (command.type === \"content\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.getOne();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t// comment\n\t\t\tif (command.type === \"comment\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tawait bot.sendComment(command.arg);\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t} catch(err) {\n\t\t\tbusy = false;\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tbot: bot,\n\t\tbotState: botState,\n\t\tprevBotState: prevBotState,\n\t\tsetBotState: setBotState,\n\t\texecuteCommand: executeCommand\n\t};\n};\n\nexport const [BotProvider, useBotContext] = constate(useBot);\n","import {React, useRef,useEffect} from \"react\";\nexport default function usePrev(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }","import React, { useState, useEffect, useCallback } from \"react\";\n// import Avatar from '@material-ui/core/Avatar';\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport { useUserContext } from \"./UserContext\";\nimport { useBotContext } from \"./BotContext\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport { useForm } from \"react-hook-form\";\nimport Cookies from \"universal-cookie\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tflexDirection: \"column\"\n\t},\n\tpaperform: {\n\t\twidth: \"400px\",\n\t\tmargin: theme.spacing(8, 4),\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\"\n\t},\n\tpaperlogging: {\n\t\tminWidth: \"12vw\",\n\t\theight: \"9vh\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tposition: \"absolute\",\n\t\tmarginTop: \"25vh\",\n\t\tzIndex: theme.zIndex.drawer + 2\n\t},\n\tpaperreconnect: {\n\t\tpadding:\"12px\",\n\t\tminWidth: \"20vw\",\n\t\theight: \"15vh\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\treconnectText:{},\n\treconnectButton:{\n\t\talignSelf:\"flex-end\"\n\t},\n\tform: {\n\t\twidth: \"80%\",\n\t\tmarginTop: theme.spacing(1)\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2)\n\t},\n\tsignin: {\n\t\tmarginTop: theme.spacing(2)\n\t},\n\tbackdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: \"#fff\"\n\t},\n\tcircle: {\n\t\tmarginRight: \"9px\"\n\t}\n}));\n\nexport default function Login() {\n\tconst classes = useStyles();\n\n\tconst { user, setUser } = useUserContext();\n\tconst BotContext = useBotContext();\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\tconst { register, handleSubmit } = useForm();\n\n\tconst onSubmit = async (data, e) => {\n\t\te.preventDefault();\n\t\tlet myUser = { username: data.username, password: data.password };\n\t\tlet loginRes = await loginCallback(myUser);\n\t\tif (loginRes) {\n\t\t\t// save it in cookie\n\t\t\tconst cookies = new Cookies();\n\t\t\tcookies.set(\"user\", myUser);\n\t\t\tsetUser(myUser);\n\t\t}\n\t};\n\n\tconst loginCallback = useCallback(\n\t\tasync myUser => {\n\t\t\tconsole.log(myUser);\n\t\t\tsetOpenForm(false);\n\t\t\tsetOpenLoadingCircle(true);\n\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\ttype: \"login\",\n\t\t\t\targ: myUser\n\t\t\t});\n\t\t\tif (res) {\n\t\t\t\tconsole.log(\"login success\");\n\t\t\t\tsetOpenBackDrop(false);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconsole.log(\"login fail\");\n\t\t\t\tsetSnackbarContent({\n\t\t\t\t\tseverity: \"error\",\n\t\t\t\t\ttext: \"帳密輸入錯誤！！\"\n\t\t\t\t});\n\t\t\t\tsetIsSnackbarOpen(true);\n\t\t\t\tsetOpenForm(true);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[BotContext]\n\t);\n\tconst handleReconnect = () => {\n\t\tBotContext.bot.reconnect();\n\t}\n\tconst [openBackDrop, setOpenBackDrop] = useState(!user);\n\tconst [openLoadingCircle, setOpenLoadingCircle] = useState(false);\n\tconst [openForm, setOpenForm] = useState(true);\n\tconst [openReconnect, setOpenReconnect] = useState(false);\n\n\tuseEffect(() => {\n\t\tasync function tryLogin() {\n\t\t\tawait loginCallback(user);\n\t\t}\n\t\tconsole.log(\"botState:\", BotContext.botState);\n\t\tconsole.log(\"prev botState:\", BotContext.prevBotState);\n\t\tif (user) {\n\t\t\tif (BotContext.prevBotState === undefined) return;\n\t\t\tif (\n\t\t\t\tBotContext.botState.connect &&\n\t\t\t\t!BotContext.prevBotState.connect\n\t\t\t) {\n\t\t\t\tsetOpenReconnect(false);\n\t\t\t\ttryLogin();\n\t\t\t} else if (\n\t\t\t\tBotContext.prevBotState.connect &&\n\t\t\t\t!BotContext.botState.connect\n\t\t\t) {\n\t\t\t\t// disconnected\n\t\t\t\tsetOpenBackDrop(true);\n\t\t\t\tsetOpenReconnect(true);\n\t\t\t}\n\t\t}\n\t}, [user, BotContext.botState, BotContext.prevBotState, loginCallback]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t{openLoadingCircle && (\n\t\t\t\t<Paper className={classes.paperlogging}>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\tclassName={classes.circle}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t{!BotContext.connect\n\t\t\t\t\t\t\t? \"連線中\"\n\t\t\t\t\t\t\t: !BotContext.login\n\t\t\t\t\t\t\t? \"登入中\"\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Paper>\n\t\t\t)}\n\t\t\t<Backdrop className={classes.backdrop} open={openBackDrop}>\n\t\t\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t{openReconnect && (\n\t\t\t\t\t\t<Paper className={classes.paperreconnect}>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" className={classes.reconnectText}>您斷線了</Typography>\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" className={classes.reconnectButton} onClick={handleReconnect}>\n\t\t\t\t\t\t\t\t重新連線\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\t\t\t\t\t{openForm && (\n\t\t\t\t\t\t<Paper className={classes.paperform}>\n\t\t\t\t\t\t\t{/* <Avatar variant=\"square\" className={classes.large} src=\"logo.png\"/> */}\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"h4\"\n\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\tclassName={classes.signin}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t登入PTT\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\tlabel=\"帳號\"\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"username\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tlabel=\"密碼\"\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"remember\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel=\"記住我\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t登入\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\t\t\t\t</Grid>\n\t\t\t</Backdrop>\n\t\t</Grid>\n\t);\n}\n","function base10_64(num) {\n  var nnum = Number(num);\n  var order =\n      \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\";\n  var base = order.length;\n  var rtn = \"\",\n      r;\n  while (nnum) {\n      r = nnum % base;\n      nnum -= r;\n      nnum /= base;\n      rtn = order.charAt(r) + rtn;\n  }\n  return rtn;\n}\n\nfunction base16_10(num) {\n  return parseInt(num, 16);\n}\n\nfunction URL2AID(url) {\n  console.log(url);\n\n  var urlPieces = url.split(\"/\").filter(x => x);\n  if (urlPieces.length !== 5 || urlPieces[1] !== 'www.ptt.cc') return \"\";\n\n  var board = urlPieces[3];\n\n  var codes = urlPieces[4].split(\".\");\n  if(codes.length !== 5) return \"\";\n  \n  var code10 = codes[1];\n  var code16 = codes[3];\n  var b10_64 = base10_64(code10);\n  var b16_64 = base10_64(base16_10(code16));\n  if(b16_64.length === 1) b16_64 = \"0\"+b16_64;\n\n  return [board, b10_64 +b16_64];\n}\n\n\n\nexport {URL2AID};\n","import { Article as ArticleModel } from \"ptt-client/dist/sites/ptt/model\";\nimport { URL2AID } from \"./decode\";\n\nconst parseArticle = async (articleItem, BotContext) => {\n\ttry {\n\t\tlet newArticleContent = {\n\t\t\tinfo: {\n\t\t\t\tid: \"\",\n\t\t\t\taid: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\tboardname: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\tcommentStartIndex: -1,\n\t\t\t\ttitle: \"\",\n\t\t\t\tip: \"\"\n\t\t\t},\n\t\t\tcontent: [],\n\t\t\tcomment: []\n\t\t};\n\t\tnewArticleContent.info.boardname = articleItem.boardname;\n\t\tnewArticleContent.info.id = articleItem.id;\n\t\tnewArticleContent.info.title = articleItem.title;\n\t\t//console.warn(articleItem);\n\t\tlet res = await getArticleResponse(BotContext, newArticleContent);\n\t\tnewArticleContent.info.aid = \"\";\n\t\tnewArticleContent.info.author = res.author;\n\t\tnewArticleContent.info.timestamp = res.timestamp;\n\t\tnewArticleContent.info.commentStartIndex = -1;\n\t\tnewArticleContent.info.title = res.title;\n\t\tnewArticleContent.info.ip = \"\";\n\t\tnewArticleContent.content = [];\n\t\tnewArticleContent.comment = [];\n\t\tparseArticleInfoAndContent(res, newArticleContent);\n\t\tparseArticleComment(res, newArticleContent);\n\t\t// console.log(newArticleContent);\n\t\treturn newArticleContent;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\nconst getArticleResponse = async (BotContext, newArticleContent) => {\n\tlet query = BotContext.bot\n\t\t.select(ArticleModel)\n\t\t.where(\"boardname\", newArticleContent.info.boardname)\n\t\t.where(\"title\", newArticleContent.info.title);\n\tlet res = await BotContext.executeCommand({\n\t\ttype: \"content\",\n\t\targ: query\n\t});\n\tif (!res) return Promise.reject(\"getArticleResponse err.\");\n\tconsole.log(res);\n\treturn res;\n};\n\nconst parseArticleInfoAndContent = (res, newArticleContent) => {\n\tlet content = res.content;\n\t// content starts from index 4\n\tfor (let i = 4; i < content.length; i++) {\n\t\tlet s = content[i].str;\n\t\tif (s.startsWith(\"※ 發信站: 批踢踢實業坊(ptt.cc)\")) {\n\t\t\tnewArticleContent.info.ip = s.substring(27);\n\t\t\t// next line should be \"※ 文章網址: https://www.ptt.cc/bbs/Test/M.1588897271.A.57F.html\"\n\t\t\t// parse as AID\n\t\t\tlet aidLine = content[++i].str;\n\t\t\tlet url = aidLine.substring(aidLine.indexOf(\":\") + 2);\n\t\t\tconst [board, AID] = URL2AID(url);\n\t\t\tnewArticleContent.info.aid = AID;\n\t\t\tnewArticleContent.info.commentStartIndex = i + 1;\n\t\t\tbreak;\n\t\t} else {\n\t\t\tnewArticleContent.content.push(s);\n\t\t}\n\t}\n};\n// Todo : check commentStartIndex is correct.\nconst parseArticleComment = (res, newArticleContent) => {\n\tif (newArticleContent.info.commentStartIndex === -1) return;\n\n\tlet content = res.content;\n\t// clear all comment\n\tnewArticleContent.comment = [];\n\n\tfor (\n\t\tvar i = newArticleContent.info.commentStartIndex, floor = 1;\n\t\ti < content.length;\n\t\ti++\n\t) {\n\t\tlet s = content[i].str;\n\t\t// type : '推','噓','→'\n\t\tlet commentLine = { type: \"\", author: \"\", text: \"\", timestamp: \"\" };\n\t\t// find out whether it is a normal comment\n\t\tif (s.match(/[推噓→]\\s+[\\w\\d]+\\s*:.+/)) {\n\t\t\tcommentLine.floor = floor++;\n\t\t\tcommentLine.type = s[0];\n\t\t\tcommentLine.timestamp = s.substring(s.length - 11);\n\t\t\tlet firstColon = s.indexOf(\":\");\n\t\t\tcommentLine.author = s.substring(2, firstColon);\n\t\t\tcommentLine.text = s.substring(firstColon + 1, s.length - 11);\n\t\t} else {\n\t\t\tcommentLine.text = s;\n\t\t}\n\t\tnewArticleContent.comment.push(commentLine);\n\t}\n};\n// This is used when you already have article.\n// Used in sendComment because we only need to refresh comment.\nconst refreshArticleComment = async (BotContext, newArticleContent) => {\n\tlet res = await getArticleResponse(BotContext, newArticleContent);\n\tif (!res) return Promise.reject(\"refreshArticleComment err\");\n\tparseArticleComment(res, newArticleContent);\n\tconsole.log(\"refresh\", newArticleContent.comment);\n\treturn newArticleContent;\n};\n\n// Get articleList based on boardname\n\nconst getArticleList = async (BotContext, boardname) => {\n\ttry {\n\t\t// build query based on criteria\n\t\tlet query = BotContext.bot\n\t\t\t.select(ArticleModel)\n\t\t\t.where(\"boardname\", boardname);\n\t\t\n\t\tlet res = await BotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t});\n\t\treturn res;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\n\n// Get articleList based on searching criteria\n// criteria = { boardname:'',\n//  \t\t\ttitle:'',\n//   \t\t\tauthor:'',\n//    \t\t\tpush:''\n// \t\t\t  }\nconst getArticleListIterator = async (BotContext, criteria) => {\n\ttry {\n\t\t// build query based on criteria\n\t\tlet query = BotContext.bot\n\t\t\t.select(ArticleModel)\n\t\t\t.where(\"boardname\", criteria.boardname);\n\t\tif (criteria.title) query.where(\"title\", criteria.title);\n\t\tif (criteria.author) query.where(\"author\", criteria.author);\n\t\tif (criteria.push) query.where(\"push\", criteria.push);\n\t\t// res will be an iterator\n\t\tlet res = await BotContext.executeCommand({\n\t\t\ttype: \"selectIterator\",\n\t\t\targ: query\n\t\t});\n\t\treturn res;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\nexport { parseArticle, refreshArticleComment, getArticleList,getArticleListIterator };\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {getArticleList} from './utils/article'\n\nexport default function BoardItem(props) {\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\n\tconst handleClick = async () => {\n\t\tconsole.log(\"boardItem click\", item, info, BotContext);\n\t\ttry {\n\t\t\tlet res = await getArticleList(BotContext,item.name);\n\t\t\tinfo.setArticleList(res);\n\t\t\tinfo.setBoardName(item.name);\n\t\t\tinfo.setIndex(0);\n\t\t}catch(err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t\t\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tbutton\n\t\t\tonClick={handleClick}\n\t\t\tkey={item.name}\n\t\t\tstyle={{ height: \"10vh\" }}\n\t\t>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.name}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.title}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<ListItemIcon style={{ justifyContent: \"center\" }}>\n\t\t\t\t<ChevronRightIcon />\n\t\t\t</ListItemIcon>\n\t\t</ListItem>\n\t);\n}\n","import { useState } from \"react\";\nimport constate from \"constate\";\nimport { Article } from \"./utils/article\";\nimport { useBotContext } from \"./BotContext\";\n\nconst useArticleBoardInfo = () => {\n\tconst BotContext = useBotContext();\n\tconst [boardName, setBoardName] = useState(\"\");\n\tconst [article, setArticle] = new useState({\n\t\tinfo: {\n\t\t\tid: \"\",\n\t\t\taid: \"\",\n\t\t\tauthor: \"\",\n\t\t\tboardname: \"\",\n\t\t\ttimestamp: \"\",\n\t\t\tcommentStartIndex: -1,\n\t\t\ttitle: \"\",\n\t\t\tip: \"\"\n\t\t},\n\t\tcontent: [],\n\t\tcomment: []\n\t});\n\n\tconst [articleList, setArticleList] = useState([]);\n\tconst [index, setIndex] = useState(0);\n\tconst [articleSearchIterator, setArticleSearchIterator] = useState(null);\n\tconst [criteria, setCriteria] = useState({});\n\tconst info = {\n\t\tboardName: boardName,\n\t\tsetBoardName: setBoardName,\n\t\tarticle: article,\n\t\tsetArticle: setArticle,\n\t\tarticleList: articleList,\n\t\tsetArticleList: setArticleList,\n\t\tindex: index,\n\t\tsetIndex: setIndex,\n\t\tarticleSearchIterator : articleSearchIterator,\n\t\tsetArticleSearchIterator : setArticleSearchIterator,\n\t\tcriteria: criteria,\n\t\tsetCriteria : setCriteria\n\t};\n\n\treturn info;\n};\n\nexport const [ArticleBoardInfoProvider, useArticleBoardInfoContext] = constate(\n\tuseArticleBoardInfo\n);\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { useUserContext } from \"./UserContext\";\nimport { useBotContext } from \"./BotContext\";\nimport List from \"@material-ui/core/List\";\nimport BoardItem from \"./BoardItem\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\n\n// wierd import...\nimport { Board } from \"ptt-client/dist/sites/ptt/model\";\n\nexport default function BoardDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"80vh\",\n\t\t\theight: \"80vh\",\n\t\t\toverflow: \"auto\",\n\t\t\talignContent: \"flex-start\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tlist: {\n\t\t\tpadding: \"0px\",\n\t\t\twidth:\"100%\"\n\t\t}\n\t}));\n\tconst classes = useStyles();\n\tconst { user } = useUserContext();\n\tconst BotContext = useBotContext();\n\tconst [listItems, setListItems] = useState([]);\n\n\tconst info = useArticleBoardInfoContext();\n\n\tlet hotItems = useRef(null);\n\tlet favoriteItems = useRef(null);\n\tlet searchCache = useRef({});\n\tlet selectedBoard = props.selectedBoard;\n\tlet searchBoardText = props.searchBoardText;\n\n\t// Optimization : 1. Cache all search response.\n\tconst getBoardCallback = useCallback(async () => {\n\t\t// if searchBoardText is not empty -> search board with this text\n\t\t// else search based on selectedBoard\n\t\tconsole.log(\"searchCache\", searchCache);\n\t\tlet lis;\n\t\tlet query;\n\t\tif (searchBoardText.length > 0) {\n\t\t\tif (searchCache.current[searchBoardText]) {\n\t\t\t\tlis = searchCache.current[searchBoardText];\n\t\t\t} else {\n\t\t\t\tquery = BotContext.bot\n\t\t\t\t\t.select(Board)\n\t\t\t\t\t.where(\"prefix\", searchBoardText);\n\t\t\t}\n\t\t} else {\n\t\t\t// already cached\n\t\t\tif (selectedBoard === \"hot\" && hotItems.current) {\n\t\t\t\tlis = hotItems.current;\n\t\t\t\tconsole.log(\"hot cache\", hotItems);\n\t\t\t} else if (selectedBoard === \"favorite\" && favoriteItems.current) {\n\t\t\t\tlis = favoriteItems.current;\n\t\t\t} else {\n\t\t\t\tquery =\n\t\t\t\t\tselectedBoard === \"hot\"\n\t\t\t\t\t\t? BotContext.bot.select(Board).where(\"entry\", \"hot\")\n\t\t\t\t\t\t: BotContext.bot\n\t\t\t\t\t\t\t\t.select(Board)\n\t\t\t\t\t\t\t\t.where(\"entry\", \"favorite\");\n\t\t\t}\n\t\t}\n\t\tif (!lis) {\n\t\t\tlet t1 = performance.now();\n\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\ttype: \"select\",\n\t\t\t\targ: query\n\t\t\t});\n\t\t\tlet t2 = performance.now();\n\t\t\tconsole.log(\"bot select board\", t2 - t1);\n\t\t\tif (!res) return false;\n\t\t\tconsole.log(res);\n\t\t\t// generate list items\n\t\t\tlis = res.map(item => {\n\t\t\t\treturn BoardItem({ item, info, BotContext });\n\t\t\t});\n\t\t\tlet t3 = performance.now();\n\t\t\tconsole.log(\"map boardItem\", t3 - t2);\n\n\t\t\t// we cache for speed\n\t\t\tif (searchBoardText.length === 0) {\n\t\t\t\tif (selectedBoard === \"hot\") {\n\t\t\t\t\thotItems.current = lis;\n\t\t\t\t} else if (selectedBoard === \"favorite\") {\n\t\t\t\t\tfavoriteItems.current = lis;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsearchCache.current[searchBoardText] = lis;\n\t\t\t}\n\t\t}\n\t\tsetListItems(lis);\n\t}, [BotContext, setListItems, selectedBoard, info, searchBoardText]);\n\n\tuseEffect(() => {\n\t\tasync function getBoard() {\n\t\t\treturn await getBoardCallback(user);\n\t\t}\n\t\t// get board list at the beginning\n\t\tif (BotContext.botState.login) {\n\t\t\tconsole.log(selectedBoard);\n\t\t\tgetBoard();\n\t\t}\n\t}, [BotContext.botState.login, selectedBoard, searchBoardText]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton count={6} />\n\t\t\t\t)}\n\t\t\t</Grid>\n\t\t\t{listItems && <List className={classes.list}> {listItems} </List>}\n\t\t\t{!listItems && \"\"}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from \"react-loading-skeleton\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useBotContext } from \"./BotContext\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nexport default function BoardSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\tskeleton: {\n\t\t\tfontSize: \"24px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\troot: {\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\t\n\t\t},\n\t\tselect: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\twidth: \"100%\"\n\t\t},\n\t\ttabs: {\n\t\t\tflexBasis: \"85%\"\n\t\t},\n\t\ttab: {\n\t\t\tfontSize: \"0.8rem\",\n\t\t\tminWidth: \"50%\"\n\t\t},\n\t\tsearchBotton: {\n\t\t\tflexBasis: \"15%\",\n\t\t},\n\t\tbtntabs: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tinputbase: {}\n\t}));\n\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [selectedValue, setSelectedValue] = useState(0);\n\tconst [isInputShow, setIsInputShow] = useState(false);\n\tlet setSelectedBoard = props.setSelectedBoard;\n\tlet setSearchBoardText = props.setSearchBoardText;\n\n\tconst handleChange = (e, v) => {\n\t\tsetSelectedValue(v);\n\t};\n\tconst handleSearchClick = () => {\n\t\tsetIsInputShow(isInputShow => !isInputShow);\n\t};\n\tconst handleInputbaseOnChange = (e) => {\n\t\tconsole.log('search board text',e.target.value);\n\t\tsetSearchBoardText(e.target.value);\n\t}\n\t\n\tuseEffect(() => {\n\t\tlet selectedBoard = \"hot\";\n\t\tswitch (selectedValue) {\n\t\t\tcase 0:\n\t\t\t\tselectedBoard = \"hot\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tselectedBoard = \"favorite\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tsetSelectedBoard(selectedBoard);\n\t}, [selectedValue, setSelectedBoard]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{!BotContext.botState.login && <Skeleton count={1} />}\n\t\t\t</Grid>\n\t\t\t{BotContext.botState.login && (\n\t\t\t\t<Grid item className={classes.select}>\n\t\t\t\t\t<Grid item className={classes.btntabs}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\taria-label=\"search board\"\n\t\t\t\t\t\t\tclassName={classes.searchBotton}\n\t\t\t\t\t\t\tonClick={handleSearchClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tvalue={selectedValue}\n\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tclassName={classes.tabs}\n\t\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"熱門看板\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"最愛看板\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Collapse in={isInputShow}>\n\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\tonChange={handleInputbaseOnChange}\n\t\t\t\t\t\t\tplaceholder=\"搜尋看板\"\n\t\t\t\t\t\t\tclassName={classes.inputbase}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport BoardDisplay from \"./BoardDisplay\";\nimport BoardSelect from \"./BoardSelect\";\n\nexport default function BoardArea() {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\tposition: \"relative\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRight: `1px solid ${theme.palette.divider}`,\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t}\n\t}));\n\tconst classes = useStyles();\n\tconst [selectedBoard, setSelectedBoard] = useState(\"hot\");\n\tconst [searchBoardText, setSearchBoardText] = useState(\"\");\n\treturn (\n\t\t\n\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<BoardSelect setSelectedBoard = {setSelectedBoard} setSearchBoardText={setSearchBoardText}/>\n\t\t\t<BoardDisplay selectedBoard={selectedBoard} searchBoardText={searchBoardText} />\n\t\t</Grid>\n\t);\n}\n","import React ,{useState} from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport {refreshArticleComment} from './utils/article'\nexport default function SendComment(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\",\n\t\t\tpaddingBottom: \"12px\"\n\t\t},\n\t\tdivider: {\n\t\t\theight: \"100%\",\n\t\t\tmargin: 4\n\t\t},\n\t\ttype: {\n\t\t\tflexBasis: \"10%\"\n\t\t},\n\t\ttext: {\n\t\t\tflexBasis: \"75%\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tbutton: {\n            fontSize:\"0.6rem\",\n\t\t\theight: \"fit-content\",\n            flexBasis: \"10%\",\n            alignSelf: \"center\"\n        },\n        sending: {\n            flexBasis: \"5%\",\n            alignSelf: \"center\",\n            marginLeft:\"4px\"\n        },\n        lp: {\n            width:\"100%\",\n        }\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n    const [isSending,setIsSending] = useState(false);\n    const { handleSubmit, control } = useForm();\n\t// Todo : 1. 貼圖不要被切掉\n    //        2. variable length\n\t\n\tconst onSubmit = async values => {\n\t\tconsole.log(values);\n        let text = values.text;\n        // do not send empty str\n        text = text.trim();\n        if(text.length === 0) return;\n        setIsSending(true);\n\t\tlet arg = {\n\t\t\ttype: values.type,\n\t\t\ttext: text,\n\t\t\tboardName: article.info.boardname,\n\t\t\taid: article.info.aid\n\t\t};\n\t\tlet command = {\n\t\t\ttype: \"comment\",\n\t\t\targ: arg\n        };\n        \n        try {\n            await BotContext.executeCommand(command);\n        } catch(err) {\n            console.log(err);\n            return;\n        }\n\t\t\n        // reload this article\n        console.log('reload',article)\n        try{\n            let refreshArticleCommentRes = await refreshArticleComment(BotContext,{...article});\n            info.setArticle(refreshArticleCommentRes);\n\n        } catch(err) {\n            console.log(err);\n        }\n        setIsSending(false);\n        \n\t};\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<form\n\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\tclassName={classes.form}\n\t\t\t\tnoValidate\n\t\t\t\tautoComplete=\"off\"\n\t\t\t>\n\t\t\t\t<FormControl className={classes.type}>\n\t\t\t\t\t<InputLabel>推文類型</InputLabel>\n\n\t\t\t\t\t<Controller\n\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t<Select>\n\t\t\t\t\t\t\t\t<MenuItem value={\"1\"}>推</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"2\"}>噓</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"3\"}>→</MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\trules={{ required: \"this is required\" }}\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tdefaultValue=\"1\"\n\t\t\t\t\t/>\n\t\t\t\t</FormControl>\n\n\t\t\t\t<Divider className={classes.divider} orientation=\"vertical\" />\n\t\t\t\t<Controller\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tas={<TextField label=\"內容\" multiline />}\n\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\tname=\"text\"\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\tendIcon={<PlayArrowIcon />}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t>\n\t\t\t\t\t送出\n\t\t\t\t</Button>\n                <Grid item className={classes.sending}>{isSending && <CircularProgress  size={\"1rem\"} />}</Grid>\n                \n\t\t\t</form>\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport { List, ListItem, ListItemText } from \"@material-ui/core\";\nimport SendComment from \"./SendComment\";\n\nexport default function ArticleDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\ttop: {\n\t\t\theight: \"20vh\",\n\t\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\t\tmarginTop: \"12px\",\n\t\t\tflexWrap: \"nowrap\",\n\t\t\tpaddingLeft: \"4vw\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\ttop: 0,\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: 1001\n\t\t},\n\t\tinfo: {},\n\t\ttitleText: {\n\t\t\talignSelf: \"center\",\n\t\t\tflexBasis: \"100%\",\n\t\t\tflexGrow: \"0\",\n\t\t\tflexShrink: \"0\"\n\t\t},\n\t\tcontent: {\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"4vw\",\n\t\t\tborderBottom: \"2px solid rgba(0, 0, 0, 0.12)\"\n\t\t},\n\t\tcomment: {},\n\t\tauthor: {\n\t\t\talignSelf: \"center\"\n\t\t},\n\t\tcommentlist: {\n\t\t\tpaddingTop: 0,\n\t\t\twidth: \"100%\"\n\t\t},\n\t\tcontentlist: {\n\t\t\twidth: \"100%\"\n\t\t},\n\t\tcommentlist_item: {\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\"\n\t\t},\n\t\tcommentlist_type: {\n\t\t\tflexBasis: \"5%\"\n\t\t},\n\t\tcommentlist_author: {\n\t\t\tflexBasis: \"20%\"\n\t\t},\n\t\tcommentlist_text: {\n\t\t\tflexBasis: \"65%\"\n\t\t},\n\t\tcommentlist_timestamp: {\n\t\t\tflexBasis: \"10%\"\n\t\t},\n\n\t\tlit: {\n\t\t\twhiteSpace: \"pre\"\n\t\t}\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\tconst classes = useStyles();\n\n\t// Todo : 1. 排版會跑掉\n\t//\t\t  2. 自動開圖\n\t//\n\tconst genContentList = content => {\n\t\tif (content) {\n\t\t\tlet res = content.map(item => {\n\t\t\t\treturn (\n\t\t\t\t\t<ListItem disableGutters={true} className={classes.lit}>\n\t\t\t\t\t\t<ListItemText primary={item} />\n\t\t\t\t\t</ListItem>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn <List className={classes.contentlist}>{res}</List>;\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tconst genCommentList = comment => {\n\t\tif (comment) {\n\t\t\tlet res = comment.map(item => {\n\t\t\t\treturn (\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\tdisableGutters={true}\n\t\t\t\t\t\tdivider={true}\n\t\t\t\t\t\tclassName={classes.commentlist_item}\n\t\t\t\t\t\tkey={item.floor}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.type ? (\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tclassName={classes.commentlist_type}\n\t\t\t\t\t\t\t\tprimary={item.type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{item.author ? (\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tclassName={classes.commentlist_author}\n\t\t\t\t\t\t\t\tprimary={item.author}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\tclassName={classes.commentlist_text}\n\t\t\t\t\t\t\tprimary={item.text}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{item.timestamp ? (\n\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\tclassName={classes.commentlist_timestamp}\n\t\t\t\t\t\t\t\tprimary={item.floor + \"F\"}\n\t\t\t\t\t\t\t\tsecondary={item.timestamp}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ListItem>\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn <List className={classes.commentlist}>{res}</List>;\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tconst ref = React.createRef();\n\n\t// go back to top when load new article\n\tuseEffect(() => {\n\t\tif (info.index === 2) {\n\t\t\tref.current.scrollTop = 0;\n\t\t}\n\t}, [info.index]);\n\n\treturn (\n\t\t<Grid container ref={ref} component=\"main\" className={classes.root}>\n\t\t\t<CssBaseline />\n\t\t\t{info.index ? (\n\t\t\t\t<IconButton\n\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\tinfo.setIndex(info.articleSearchIterator ? 1 : 0);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t>\n\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t</IconButton>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t\t<Grid container className={classes.top}>\n\t\t\t\t<Grid container className={classes.info}>\n\t\t\t\t\t<Typography className={classes.author} variant={\"body1\"}>\n\t\t\t\t\t\t{article.info.author}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant={\"h5\"} className={classes.titleText}>\n\t\t\t\t\t\t{article.info.title}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography className={classes.boardName} variant={\"body2\"}>\n\t\t\t\t\t\t{article.info.boardname}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography className={classes.timestamp} variant={\"body2\"}>\n\t\t\t\t\t\t・{article.info.timestamp}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography className={classes.ip} variant={\"body2\"}>\n\t\t\t\t\t\t・來自：{article.info.ip}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Grid container className={classes.content}>\n\t\t\t\t{genContentList(article.content)}\n\t\t\t</Grid>\n\n\t\t\t<Grid container className={classes.comment}>\n\t\t\t\t{genCommentList(article.comment)}\n\t\t\t</Grid>\n\n\t\t\t<Grid container className={classes.sendComment}>\n\t\t\t\t<SendComment />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {parseArticle,refreshArticleComment} from \"./utils/article\"\n\nexport default function ArticleItem(props) {\n\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\n\tconst handleClick = async () => {\n\t\t// handle deleted article\n\t\tif(item.title.startsWith(\"(本文已被刪除)\")) return;\n\t\tif(item.author.startsWith(\"-\")) return;\n\t\tconsole.log(\"article item click:\", info, item, BotContext);\n\t\ttry {\n\t\t\tlet t1 = performance.now();\n\t\t\tlet article = await parseArticle(item,BotContext);\n\t\t\tinfo.setIndex(2);\n\t\t\tinfo.setArticle(article);\n\t\t\tlet t2 = performance.now();\n\t\t\tconsole.log(\"article load time\",t2-t1);\n\t\t} catch(err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tonClick={handleClick}\n\t\t\tbutton\n\t\t\tkey={item.id}\n\t\t\tdivider={true}\n\t\t\tstyle={{ height: \"10vh\" }}\n\t\t>\n\t\t\t<ListItem\n\t\t\t\tstyle={{ flexBasis: \"15%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<Typography variant=\"body2\">{item.push}</Typography>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{item.status === \"R:\" && (\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={<Typography variant=\"body2\">RE:</Typography>}\n\t\t\t\t\t\tstyle={{ textAlign: \"right\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ListItem>\n\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.title}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.author}</Typography>\n\t\t\t\t}\n\t\t\t\tstyle={{ flexBasis: \"60%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t/>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body2\">{item.date}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">id:{item.id}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<ListItemIcon style={{ justifyContent: \"center\" }}>\n\t\t\t\t<ChevronRightIcon />\n\t\t\t</ListItemIcon>\n\t\t</ListItem>\n\t);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Article } from \"ptt-client/dist/sites/ptt/model\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Fab from \"@material-ui/core/Fab\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { getArticleListIterator } from \"./utils/article\";\n\nexport default function ArticleSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tinfo: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"0\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tsearchFab: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"1vw\",\n\t\t\tbottom: \"1vh\",\n\t\t\tzIndex: \"1001\"\n\t\t},\n\t\tbackdrop: {\n\t\t\tzIndex: theme.zIndex.drawer + 1\n\t\t},\n\t\tpaper: {\n\t\t\tflexDirection: \"column\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"40vw\",\n\t\t\tmargin: \"12px\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\"\n\t\t},\n\t\tbutton: {\n\t\t\talignSelf: \"flex-end\",\n\t\t\tmarginTop: \"12px\"\n\t\t},\n\t\ttitle: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tauthor: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tpush: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tcloseIcon: {\n\t\t\tposition: \"absolute\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tsaTitle: {\n\t\t\ttextAlign: \"center\",\n\t\t\tmargin: \"24px\"\n\t\t}\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\tconst [isArticleSearchFormOpen, setIsArticleSearchFormOpen] = useState(\n\t\tfalse\n\t);\n\t\n\tconst [articleItems, setArticleItems] = useState([]);\n\t\n\n\tuseEffect(() => {\n\t\tif (info.articleList.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = info.articleList.map(item => {\n\t\t\t\treturn ArticleItem({ item, info, BotContext });\n\t\t\t});\n\t\t\tsetArticleItems(res);\n\t\t}\n\t}, [info]);\n\n\t\n\tconst toggleSearchForm = () => {\n\t\tsetIsArticleSearchFormOpen(\n\t\t\tisArticleSearchFormOpen => !isArticleSearchFormOpen\n\t\t);\n\t};\n\tconst { handleSubmit, control, errors } = useForm();\n\n\tconst onSubmitSearch = async values => {\n\t\tconsole.log(values);\n\t\t// search for matching articles\n\t\tlet criteria = {\n\t\t\tboardname: info.boardName,\n\t\t\ttitle: values.title,\n\t\t\tauthor: values.author,\n\t\t\tpush: values.push\n\t\t};\n\t\tinfo.setCriteria(criteria);\n\t\ttry {\n\t\t\tlet res = await getArticleListIterator(BotContext, criteria);\n\t\t\tconsole.log(res);\n\t\t\tinfo.setArticleSearchIterator(res);\n\t\t\ttoggleSearchForm();\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tconst handleLoadMore = () => {\n\t\t// prevent default action\n\t\tif (info.articleList.length === 0) return;\n\n\t\tconsole.log(\"handleLoadMore\", info);\n\t\tlet offset = info.articleList[info.articleList.length - 1].id;\n\t\tlet query = BotContext.bot\n\t\t\t.select(Article)\n\t\t\t.where(\"boardname\", info.boardName)\n\t\t\t.where(\"id\", offset);\n\t\tBotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t}).then(res => {\n\t\t\tconsole.log(\"res\", res);\n\t\t\tif (!res) return false;\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < offset) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\tinfo.setArticleList([...info.articleList, ...res_reduced]);\n\t\t});\n\t};\n\treturn (\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tcomponent=\"main\"\n\t\t\tclassName={classes.root}\n\t\t\tid=\"scrollableDiv\"\n\t\t>\n\t\t\t<CssBaseline />\n\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{info.articleList.length === 0 && <Skeleton count={3} />}\n\t\t\t</Grid>\n\t\t\t{info.articleList.length > 0 && (\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Backdrop\n\t\t\t\t\t\tclassName={classes.backdrop}\n\t\t\t\t\t\topen={isArticleSearchFormOpen}\n\t\t\t\t\t\tinvisible={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ClickAwayListener\n\t\t\t\t\t\t\tmouseEvent={\n\t\t\t\t\t\t\t\tisArticleSearchFormOpen ? \"onClick\" : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClickAway={toggleSearchForm}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paper elevation={4} className={classes.paper}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={classes.closeIcon}\n\t\t\t\t\t\t\t\t\tonClick={toggleSearchForm}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<Typography className={classes.saTitle}>\n\t\t\t\t\t\t\t\t\t搜尋文章\n\t\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t\t<Divider\n\t\t\t\t\t\t\t\t\tclassName={classes.divider}\n\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmitSearch)}\n\t\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"標題\" />}\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.author}\n\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"作者\" />}\n\t\t\t\t\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.push}\n\t\t\t\t\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"推數(大於多少)\"\n\t\t\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\t\t\terrors.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"必須是數字\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\terror={errors.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: /\\b\\d{0,6}\\b/\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tname=\"push\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t送出\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t</Backdrop>\n\n\t\t\t\t\t<Grid item className={classes.info}>\n\t\t\t\t\t\t看板：{info.boardName}\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Fab color=\"secondary\" className={classes.searchFab}>\n\t\t\t\t\t\t<SearchIcon onClick={toggleSearchForm} />\n\t\t\t\t\t</Fab>\n\t\t\t\t\t\n\t\t\t\t\t{/* general list: not search */}\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\t\tscrollableTarget=\"scrollableDiv\"\n\t\t\t\t\t\tdataLength={articleItems.length} //This is important field to render the next data\n\t\t\t\t\t\tnext={handleLoadMore}\n\t\t\t\t\t\thasMore={true}\n\t\t\t\t\t\tloader={\n\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tendMessage={\n\t\t\t\t\t\t\t<p style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t\t<b>Yay! You have seen it all</b>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{articleItems}\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\n\nexport default function ArticleSearch(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tinfo: {\n            height: 'fit-content',\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\tzIndex: 1001\n        },\n        buttoninfo: {\n            top: '0',\n            display: 'flex',\n            width: '100%',\n            position: 'absolute',\n            justifyContent: 'space-between',\n        }\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\n\tconst [articleListSearch, setArticleListSearch] = useState([]);\n\tconst [articleItemsSearch, setArticleItemsSearch] = useState([]);\n\tconst [hasMore, setHasMore] = useState(false);\n\n\t// use iterator the first time\n\tuseEffect(() => {\n\t\tconst setList = async it => {\n\t\t\tlet res = await it.next();\n\t\t\t//console.log(res);\n\t\t\tif (!res.done) {\n\t\t\t\tsetArticleListSearch(res.value.reverse());\n\t\t\t\tsetHasMore(true);\n\t\t\t\tinfo.setIndex(1);\n\t\t\t}\n\t\t};\n\t\tlet it = info.articleSearchIterator;\n\t\tif (it) {\n\t\t\tsetList(it);\n\t\t}\n\t}, [info.articleSearchIterator]);\n\n\t// generate items\n\tuseEffect(() => {\n\t\t//console.log(\"articleListSearch\", articleListSearch);\n\t\tif (articleListSearch.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = articleListSearch.map(item => {\n\t\t\t\treturn ArticleItem({ item, info, BotContext });\n\t\t\t});\n\n\t\t\tsetArticleItemsSearch(res);\n\t\t\t//console.log(\"hi res\", res);\n\t\t}\n\t}, [articleListSearch]);\n\n\tconst handleLoadMore = async () => {\n\t\t//console.log(\"hlm\");\n\t\t// last id from current list\n\t\tlet l_id = articleListSearch[articleListSearch.length - 1].id;\n\t\t//console.log(\"l_id\", l_id);\n\t\tlet it = info.articleSearchIterator;\n\t\tlet res = await it.next();\n\t\t//console.log(\"hlm res\", res);\n\t\tif (res.done) {\n\t\t\tsetHasMore(false);\n\t\t} else {\n\t\t\tres = res.value.reverse();\n\t\t\t//console.log(\"res value\", res);\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < l_id) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\t//console.log(\"res_reduced\", res_reduced);\n\t\t\tsetArticleListSearch([...articleListSearch, ...res_reduced]);\n\t\t}\n\t};\n\n\tif (info.index !== 1) return null;\n\telse {\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tcomponent=\"main\"\n\t\t\t\tclassName={classes.root}\n\t\t\t\tid=\"scrollableDiv1\"\n\t\t\t>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Grid className={classes.buttoninfo} item>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\tinfo.setIndex(0);\n                            info.setArticleSearchIterator(null);\n                            // force bot to get back to index page\n                            BotContext.executeCommand({type:'index'});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t<Grid item className={classes.info}>\n                        {info.criteria.boardname ? `看板：${info.criteria.boardname}` : ''}\n                        {info.criteria.title ? `．標題：${info.criteria.title}` : ''}\n                        {info.criteria.author ? `．作者：${info.criteria.author}` : ''}\n                        {info.criteria.push ? `．讚數：${info.criteria.push}` : ''}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\tscrollableTarget=\"scrollableDiv1\"\n\t\t\t\t\tdataLength={articleItemsSearch.length} //This is important field to render the next data\n\t\t\t\t\tnext={handleLoadMore}\n\t\t\t\t\thasMore={hasMore}\n\t\t\t\t\tloader={\n\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{articleItemsSearch}\n\t\t\t\t</InfiniteScroll>\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport { Grid } from \"@material-ui/core\";\nimport SwipeableViews from 'react-swipeable-views';\nimport ArticleDisplay from './ArticleDisplay';\nimport ArticleSelect from './ArticleSelect';\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport ArticleSearch from \"./ArticleSearch\";\n\n\nexport default function ArticleArea() {\n  const useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\tmaxHeight: \"80vh\",\n\t\t\t\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\n  }));\n  const info = useArticleBoardInfoContext(); \n  const classes = useStyles();\n\n  const handleChangeIndex = (i) =>{\n    info.setIndex(i);\n  }\n  return(\n    <SwipeableViews index={info.index} onChangeIndex={handleChangeIndex}>\n      <ArticleSelect/>\n      <ArticleSearch/>\n      <ArticleDisplay/>\n    </SwipeableViews>\n    \n  );\n    \n}","import React from \"react\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Link from \"@material-ui/core/Link\";\nimport InputBase from \"@material-ui/core/InputBase\";\nconst useStyles = makeStyles(theme => ({\n\ttoolbar: {\n\t\tboxShadow: \"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)\",\n\t\ttransition: \"all 0.3s cubic-bezier(.25,.8,.25,1)\",\n        position: \"sticky\",\n\t\tdisplay: \"flex\",\n\t\t\n\t},\n\ttoolbarTitle: {\n\t\tflex: 1\n\t},\n\ttoolbarSecondary: {\n\t\tjustifyContent: \"space-between\",\n\t\toverflowX: \"auto\"\n\t},\n\ttoolbarLink: {\n\t\tpadding: theme.spacing(1),\n\t\tflexShrink: 0\n\t},\n\t\n    title: {\n        fontFamily: 'Crimson Text',\n        fontSize: '32px',\n        marginRight: '16vw'\n    }\n}));\n\nexport default function Bar(props) {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Toolbar className={classes.toolbar} boxShadow={1}>\n                <div className={classes.title}>ModernPTT</div>\n\t\t\t\t\n\t\t\t</Toolbar>\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\nconst useStyles = makeStyles(theme => ({}));\n\nexport default function MySnackbar() {\n\tconst classes = useStyles();\n\tconst {\n\t\tisSnackbarOpen,\n\t\tsetIsSnackbarOpen,\n\t\tsnackbarContent\n\t} = useProgressContext();\n\tfunction Alert(props) {\n\t\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n\t}\n\n\tconst handleErrorBarClose = (event, reason) => {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\t\tsetIsSnackbarOpen(false);\n\t};\n\treturn (\n\t\t<Snackbar\n\t\t\topen={isSnackbarOpen}\n\t\t\tautoHideDuration={1000}\n\t\t\tonClose={handleErrorBarClose}\n\t\t>\n\t\t\t<Alert severity={snackbarContent.severity}>\n\t\t\t\t{snackbarContent.text}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport Login from \"./Login\";\nimport Account from \"./Account\";\n\nimport BoardArea from \"./BoardArea\";\nimport ArticleArea from \"./ArticleArea\";\nimport Bar from \"./Bar\";\nimport Container from \"@material-ui/core/Container\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { UserProvider } from \"./UserContext\";\nimport { BotProvider } from \"./BotContext\";\nimport { ArticleBoardInfoProvider } from \"./ArticleBoardInfoContext\";\nimport MySnackbar from \"./MySnackbar\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport { ProgressProvider } from \"./ProgressContext\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport { Resizable } from \"re-resizable\";\n\nconst theme = createMuiTheme({\n\ttypography: {\n\t\tbody1: {\n\t\t\tfontSize: \"0.8rem\"\n\t\t},\n\t\tbody2: {\n\t\t\tfontSize: \"0.65rem\"\n\t\t},\n\t\th5: {\n\t\t\tfontSize: \"1rem\",\n\t\t\tfontWeight: \"bold\"\n\t\t}\n\t}\n});\n\nconst useStyles = makeStyles(theme => ({\n\tresizable: {\n\t\tdisplay: \"flex\",\n\t\twidth: \"100%\"\n\t}\n}));\n\nexport default function Main() {\n\tconst classes = useStyles();\n\treturn (\n\t\t<UserProvider>\n\t\t\t<ProgressProvider>\n\t\t\t\t<BotProvider>\n\t\t\t\t\t<ArticleBoardInfoProvider>\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\tcomponent=\"main\"\n\t\t\t\t\t\t\t\tmaxWidth=\"lg\"\n\t\t\t\t\t\t\t\tdisableGutters=\"true\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t\t\t\t<Login />\n\t\t\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<Bar />\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item className={classes.resizable}>\n\t\t\t\t\t\t\t\t\t\t<Resizable\n\t\t\t\t\t\t\t\t\t\t\tdefaultSize={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth: \"25vw\",\n\t\t\t\t\t\t\t\t\t\t\t\theight: \"100%\"\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tenable={{ top:false, right:true, bottom:false, left:false, topRight:false, bottomRight:false, bottomLeft:false, topLeft:false }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BoardArea />\n\t\t\t\t\t\t\t\t\t\t</Resizable>\n\t\t\t\t\t\t\t\t\t\t<ArticleArea />\n\t\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t\t<MySnackbar />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</ArticleBoardInfoProvider>\n\t\t\t\t</BotProvider>\n\t\t\t</ProgressProvider>\n\t\t</UserProvider>\n\t);\n}\n","import React, { Component } from \"react\";\nimport Main from \"./components/Main\";\n\nclass App extends Component {\n\trender() {\n\t\treturn <Main />;\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Article\", {\n  enumerable: true,\n  get: function get() {\n    return _article.Article;\n  }\n});\nObject.defineProperty(exports, \"Board\", {\n  enumerable: true,\n  get: function get() {\n    return _board.Board;\n  }\n});\nObject.defineProperty(exports, \"Mail\", {\n  enumerable: true,\n  get: function get() {\n    return _mail.Mail;\n  }\n});\n\nvar _article = require(\"./article\");\n\nvar _board = require(\"./board\");\n\nvar _mail = require(\"./mail\");","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"decode\", {\n  enumerable: true,\n  get: function get() {\n    return _decode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"encode\", {\n  enumerable: true,\n  get: function get() {\n    return _encode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"keymap\", {\n  enumerable: true,\n  get: function get() {\n    return _keymap[\"default\"];\n  }\n});\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _keymap = _interopRequireDefault(require(\"./keymap\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dbcswidth = dbcswidth;\nexports.getWidth = getWidth;\nexports.indexOfWidth = indexOfWidth;\nexports.substrWidth = substrWidth;\n\nvar _wcwidth = _interopRequireDefault(require(\"wcwidth\"));\n\nfunction dbcswidth(str) {\n  return str.split('').reduce(function (sum, c) {\n    return sum + (c.charCodeAt(0) > 255 ? 2 : 1);\n  }, 0);\n}\n/**\n* calculate width of string.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n*/\n\n\nfunction getWidth(widthType, str) {\n  switch (widthType) {\n    case 'length':\n      return str.length;\n\n    case 'wcwidth':\n      return (0, _wcwidth[\"default\"])(str);\n\n    case 'dbcs':\n      return dbcswidth(str);\n\n    default:\n      throw new Error(\"Invalid widthType \\\"\".concat(widthType, \"\\\"\"));\n  }\n}\n/**\n* calculate the position that the prefix of string is a specific width\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} width - the width of target string\n*/\n\n\nfunction indexOfWidth(widthType, str, width) {\n  if (widthType === 'length') {\n    return Math.min(width, str.length);\n  }\n\n  for (var i = 0; i <= str.length; i++) {\n    if (getWidth(widthType, str.substr(0, i)) > width) {\n      return i - 1;\n    }\n  }\n\n  return str.length;\n}\n/**\n* extract parts of string, beginning at the character at the specified position,\n* and returns the specified width of characters. if the character is incomplete,\n* it will be replaced by space.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} startWidth - the beginning position of string\n* @params {number} width - the width of target string\n*/\n\n\nfunction substrWidth(widthType, str, startWidth, width) {\n  var ignoreWidth = typeof width === 'undefined';\n  var length = width;\n  var start = startWidth;\n  var prefixSpace = 0,\n      suffixSpace = 0;\n\n  if (widthType !== 'length') {\n    start = indexOfWidth(widthType, str, startWidth);\n\n    if (getWidth(widthType, str.substr(0, start)) < startWidth) {\n      start += 1;\n      prefixSpace = Math.max(getWidth(widthType, str.substr(0, start)) - startWidth, 0);\n    }\n\n    if (!ignoreWidth) {\n      length = indexOfWidth(widthType, str.substr(start), width - prefixSpace);\n      suffixSpace = Math.min(width, getWidth(widthType, str.substr(start))) - (prefixSpace + getWidth(widthType, str.substr(start, length)));\n    }\n  }\n\n  var substr = ignoreWidth ? str.substr(start) : str.substr(start, length);\n  return ' '.repeat(prefixSpace) + substr + ' '.repeat(suffixSpace);\n}"],"sourceRoot":""}